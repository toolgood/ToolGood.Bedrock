using Microsoft.AspNetCore.Mvc;
using System;
namespace ToolGood.WwwRoot.Test
{
    public partial class WwwRootController : Controller
    {
        [HttpGet("lib/jquery-validation/dist/additional-methods.js")]
        public IActionResult lib_jquery_validation_dist_additional_methods_js()
        {
            if (Request.Headers["If-None-Match"]  == "11C7BA7CDAECAC4665A1A55CBF0E9645") {
                Response.Headers["Expires"] = DateTime.Now.AddYears(100).ToString("r");
                return StatusCode(304);
            }
            Response.Headers["Cache-Control"] = "max-age=315360000";
            Response.Headers["Etag"] = "11C7BA7CDAECAC4665A1A55CBF0E9645";
            Response.Headers["Date"] = DateTime.Now.ToString("r");
            Response.Headers["Expires"] = DateTime.Now.AddYears(100).ToString("r");
            const string s = "LyohDQogKiBqUXVlcnkgVmFsaWRhdGlvbiBQbHVnaW4gdjEuMTcuMA0KICoNCiAqIGh0dHBzOi8vanF1ZXJ5dmFsaWRhdGlvbi5vcmcvDQogKg0KICogQ29weXJpZ2h0IChjKSAyMDE3IErDtnJuIFphZWZmZXJlcg0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlDQogKi8NCihmdW5jdGlvbiggZmFjdG9yeSApIHsNCglpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICJmdW5jdGlvbiIgJiYgZGVmaW5lLmFtZCApIHsNCgkJZGVmaW5lKCBbImpxdWVyeSIsICIuL2pxdWVyeS52YWxpZGF0ZSJdLCBmYWN0b3J5ICk7DQoJfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAib2JqZWN0IiAmJiBtb2R1bGUuZXhwb3J0cykgew0KCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoICJqcXVlcnkiICkgKTsNCgl9IGVsc2Ugew0KCQlmYWN0b3J5KCBqUXVlcnkgKTsNCgl9DQp9KGZ1bmN0aW9uKCAkICkgew0KDQooIGZ1bmN0aW9uKCkgew0KDQoJZnVuY3Rpb24gc3RyaXBIdG1sKCB2YWx1ZSApIHsNCg0KCQkvLyBSZW1vdmUgaHRtbCB0YWdzIGFuZCBzcGFjZSBjaGFycw0KCQlyZXR1cm4gdmFsdWUucmVwbGFjZSggLzwuW148Pl0qPz4vZywgIiAiICkucmVwbGFjZSggLyZuYnNwO3wmIzE2MDsvZ2ksICIgIiApDQoNCgkJLy8gUmVtb3ZlIHB1bmN0dWF0aW9uDQoJCS5yZXBsYWNlKCAvWy4oKSw7OiE/JSMkJ1wiXys9XC9cLeKAnOKAneKAmV0qL2csICIiICk7DQoJfQ0KDQoJJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAibWF4V29yZHMiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQsIHBhcmFtcyApIHsNCgkJcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCBzdHJpcEh0bWwoIHZhbHVlICkubWF0Y2goIC9cYlx3K1xiL2cgKS5sZW5ndGggPD0gcGFyYW1zOw0KCX0sICQudmFsaWRhdG9yLmZvcm1hdCggIlBsZWFzZSBlbnRlciB7MH0gd29yZHMgb3IgbGVzcy4iICkgKTsNCg0KCSQudmFsaWRhdG9yLmFkZE1ldGhvZCggIm1pbldvcmRzIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50LCBwYXJhbXMgKSB7DQoJCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgc3RyaXBIdG1sKCB2YWx1ZSApLm1hdGNoKCAvXGJcdytcYi9nICkubGVuZ3RoID49IHBhcmFtczsNCgl9LCAkLnZhbGlkYXRvci5mb3JtYXQoICJQbGVhc2UgZW50ZXIgYXQgbGVhc3QgezB9IHdvcmRzLiIgKSApOw0KDQoJJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAicmFuZ2VXb3JkcyIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCwgcGFyYW1zICkgew0KCQl2YXIgdmFsdWVTdHJpcHBlZCA9IHN0cmlwSHRtbCggdmFsdWUgKSwNCgkJCXJlZ2V4ID0gL1xiXHcrXGIvZzsNCgkJcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCB2YWx1ZVN0cmlwcGVkLm1hdGNoKCByZWdleCApLmxlbmd0aCA+PSBwYXJhbXNbIDAgXSAmJiB2YWx1ZVN0cmlwcGVkLm1hdGNoKCByZWdleCApLmxlbmd0aCA8PSBwYXJhbXNbIDEgXTsNCgl9LCAkLnZhbGlkYXRvci5mb3JtYXQoICJQbGVhc2UgZW50ZXIgYmV0d2VlbiB7MH0gYW5kIHsxfSB3b3Jkcy4iICkgKTsNCg0KfSgpICk7DQoNCi8vIEFjY2VwdCBhIHZhbHVlIGZyb20gYSBmaWxlIGlucHV0IGJhc2VkIG9uIGEgcmVxdWlyZWQgbWltZXR5cGUNCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggImFjY2VwdCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCwgcGFyYW0gKSB7DQoNCgkvLyBTcGxpdCBtaW1lIG9uIGNvbW1hcyBpbiBjYXNlIHdlIGhhdmUgbXVsdGlwbGUgdHlwZXMgd2UgY2FuIGFjY2VwdA0KCXZhciB0eXBlUGFyYW0gPSB0eXBlb2YgcGFyYW0gPT09ICJzdHJpbmciID8gcGFyYW0ucmVwbGFjZSggL1xzL2csICIiICkgOiAiaW1hZ2UvKiIsDQoJCW9wdGlvbmFsVmFsdWUgPSB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICksDQoJCWksIGZpbGUsIHJlZ2V4Ow0KDQoJLy8gRWxlbWVudCBpcyBvcHRpb25hbA0KCWlmICggb3B0aW9uYWxWYWx1ZSApIHsNCgkJcmV0dXJuIG9wdGlvbmFsVmFsdWU7DQoJfQ0KDQoJaWYgKCAkKCBlbGVtZW50ICkuYXR0ciggInR5cGUiICkgPT09ICJmaWxlIiApIHsNCg0KCQkvLyBFc2NhcGUgc3RyaW5nIHRvIGJlIHVzZWQgaW4gdGhlIHJlZ2V4DQoJCS8vIHNlZTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzQ0NjE3MC9lc2NhcGUtc3RyaW5nLWZvci11c2UtaW4tamF2YXNjcmlwdC1yZWdleA0KCQkvLyBFc2NhcGUgYWxzbyAiLyoiIGFzICIvLioiIGFzIGEgd2lsZGNhcmQNCgkJdHlwZVBhcmFtID0gdHlwZVBhcmFtDQoJCQkJLnJlcGxhY2UoIC9bXC1cW1xdXC9ce1x9XChcKVwrXD9cLlxcXF5cJFx8XS9nLCAiXFwkJiIgKQ0KCQkJCS5yZXBsYWNlKCAvLC9nLCAifCIgKQ0KCQkJCS5yZXBsYWNlKCAvXC9cKi9nLCAiLy4qIiApOw0KDQoJCS8vIENoZWNrIGlmIHRoZSBlbGVtZW50IGhhcyBhIEZpbGVMaXN0IGJlZm9yZSBjaGVja2luZyBlYWNoIGZpbGUNCgkJaWYgKCBlbGVtZW50LmZpbGVzICYmIGVsZW1lbnQuZmlsZXMubGVuZ3RoICkgew0KCQkJcmVnZXggPSBuZXcgUmVnRXhwKCAiLj8oIiArIHR5cGVQYXJhbSArICIpJCIsICJpIiApOw0KCQkJZm9yICggaSA9IDA7IGkgPCBlbGVtZW50LmZpbGVzLmxlbmd0aDsgaSsrICkgew0KCQkJCWZpbGUgPSBlbGVtZW50LmZpbGVzWyBpIF07DQoNCgkJCQkvLyBHcmFiIHRoZSBtaW1ldHlwZSBmcm9tIHRoZSBsb2FkZWQgZmlsZSwgdmVyaWZ5IGl0IG1hdGNoZXMNCgkJCQlpZiAoICFmaWxlLnR5cGUubWF0Y2goIHJlZ2V4ICkgKSB7DQoJCQkJCXJldHVybiBmYWxzZTsNCgkJCQl9DQoJCQl9DQoJCX0NCgl9DQoNCgkvLyBFaXRoZXIgcmV0dXJuIHRydWUgYmVjYXVzZSB3ZSd2ZSB2YWxpZGF0ZWQgZWFjaCBmaWxlLCBvciBiZWNhdXNlIHRoZQ0KCS8vIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBlbGVtZW50LmZpbGVzIGFuZCB0aGUgRmlsZUxpc3QgZmVhdHVyZQ0KCXJldHVybiB0cnVlOw0KfSwgJC52YWxpZGF0b3IuZm9ybWF0KCAiUGxlYXNlIGVudGVyIGEgdmFsdWUgd2l0aCBhIHZhbGlkIG1pbWV0eXBlLiIgKSApOw0KDQokLnZhbGlkYXRvci5hZGRNZXRob2QoICJhbHBoYW51bWVyaWMiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7DQoJcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCAvXlx3KyQvaS50ZXN0KCB2YWx1ZSApOw0KfSwgIkxldHRlcnMsIG51bWJlcnMsIGFuZCB1bmRlcnNjb3JlcyBvbmx5IHBsZWFzZSIgKTsNCg0KLyoNCiAqIER1dGNoIGJhbmsgYWNjb3VudCBudW1iZXJzIChub3QgJ2dpcm8nIG51bWJlcnMpIGhhdmUgOSBkaWdpdHMNCiAqIGFuZCBwYXNzIHRoZSAnMTEgY2hlY2snLg0KICogV2UgYWNjZXB0IHRoZSBub3RhdGlvbiB3aXRoIHNwYWNlcywgYXMgdGhhdCBpcyBjb21tb24uDQogKiBhY2NlcHRhYmxlOiAxMjM0NTY3ODkgb3IgMTIgMzQgNTYgNzg5DQogKi8NCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggImJhbmthY2NvdW50TkwiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7DQoJaWYgKCB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgKSB7DQoJCXJldHVybiB0cnVlOw0KCX0NCglpZiAoICEoIC9eWzAtOV17OX18KFswLTldezJ9ICl7M31bMC05XXszfSQvLnRlc3QoIHZhbHVlICkgKSApIHsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCg0KCS8vIE5vdyAnMTEgY2hlY2snDQoJdmFyIGFjY291bnQgPSB2YWx1ZS5yZXBsYWNlKCAvIC9nLCAiIiApLCAvLyBSZW1vdmUgc3BhY2VzDQoJCXN1bSA9IDAsDQoJCWxlbiA9IGFjY291bnQubGVuZ3RoLA0KCQlwb3MsIGZhY3RvciwgZGlnaXQ7DQoJZm9yICggcG9zID0gMDsgcG9zIDwgbGVuOyBwb3MrKyApIHsNCgkJZmFjdG9yID0gbGVuIC0gcG9zOw0KCQlkaWdpdCA9IGFjY291bnQuc3Vic3RyaW5nKCBwb3MsIHBvcyArIDEgKTsNCgkJc3VtID0gc3VtICsgZmFjdG9yICogZGlnaXQ7DQoJfQ0KCXJldHVybiBzdW0gJSAxMSA9PT0gMDsNCn0sICJQbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIGJhbmsgYWNjb3VudCBudW1iZXIiICk7DQoNCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggImJhbmtvcmdpcm9hY2NvdW50TkwiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7DQoJcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fA0KCQkJKCAkLnZhbGlkYXRvci5tZXRob2RzLmJhbmthY2NvdW50TkwuY2FsbCggdGhpcywgdmFsdWUsIGVsZW1lbnQgKSApIHx8DQoJCQkoICQudmFsaWRhdG9yLm1ldGhvZHMuZ2lyb2FjY291bnROTC5jYWxsKCB0aGlzLCB2YWx1ZSwgZWxlbWVudCApICk7DQp9LCAiUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBiYW5rIG9yIGdpcm8gYWNjb3VudCBudW1iZXIiICk7DQoNCi8qKg0KICogQklDIGlzIHRoZSBidXNpbmVzcyBpZGVudGlmaWVyIGNvZGUgKElTTyA5MzYyKS4gVGhpcyBCSUMgY2hlY2sgaXMgbm90IGEgZ3VhcmFudGVlIGZvciBhdXRoZW50aWNpdHkuDQogKg0KICogQklDIHBhdHRlcm46IEJCQkJDQ0xMYmJiICg4IG9yIDExIGNoYXJhY3RlcnMgbG9uZzsgYmJiIGlzIG9wdGlvbmFsKQ0KICoNCiAqIFZhbGlkYXRpb24gaXMgY2FzZS1pbnNlbnNpdGl2ZS4gUGxlYXNlIG1ha2Ugc3VyZSB0byBub3JtYWxpemUgaW5wdXQgeW91cnNlbGYuDQogKg0KICogQklDIGRlZmluaXRpb24gaW4gZGV0YWlsOg0KICogLSBGaXJzdCA0IGNoYXJhY3RlcnMgLSBiYW5rIGNvZGUgKG9ubHkgbGV0dGVycykNCiAqIC0gTmV4dCAyIGNoYXJhY3RlcnMgLSBJU08gMzE2Ni0xIGFscGhhLTIgY291bnRyeSBjb2RlIChvbmx5IGxldHRlcnMpDQogKiAtIE5leHQgMiBjaGFyYWN0ZXJzIC0gbG9jYXRpb24gY29kZSAobGV0dGVycyBhbmQgZGlnaXRzKQ0KICogICBhLiBzaGFsbCBub3Qgc3RhcnQgd2l0aCAnMCcgb3IgJzEnDQogKiAgIGIuIHNlY29uZCBjaGFyYWN0ZXIgbXVzdCBiZSBhIGxldHRlciAoJ08nIGlzIG5vdCBhbGxvd2VkKSBvciBkaWdpdCAoJzAnIGZvciB0ZXN0ICh0aGVyZWZvcmUgbm90IGFsbG93ZWQpLCAnMScgZGVub3RpbmcgcGFzc2l2ZSBwYXJ0aWNpcGFudCwgJzInIHR5cGljYWxseSByZXZlcnNlLWJpbGxpbmcpDQogKiAtIExhc3QgMyBjaGFyYWN0ZXJzIC0gYnJhbmNoIGNvZGUsIG9wdGlvbmFsIChzaGFsbCBub3Qgc3RhcnQgd2l0aCAnWCcgZXhjZXB0IGluIGNhc2Ugb2YgJ1hYWCcgZm9yIHByaW1hcnkgb2ZmaWNlKSAobGV0dGVycyBhbmQgZGlnaXRzKQ0KICovDQokLnZhbGlkYXRvci5hZGRNZXRob2QoICJiaWMiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7DQogICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCAvXihbQS1aXXs2fVtBLVoyLTldW0EtTlAtWjEtOV0pKFh7M318W0EtV1ktWjAtOV1bQS1aMC05XXsyfSk/JC8udGVzdCggdmFsdWUudG9VcHBlckNhc2UoKSApOw0KfSwgIlBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgQklDIGNvZGUiICk7DQoNCi8qDQogKiBDw7NkaWdvIGRlIGlkZW50aWZpY2FjacOzbiBmaXNjYWwgKCBDSUYgKSBpcyB0aGUgdGF4IGlkZW50aWZpY2F0aW9uIGNvZGUgZm9yIFNwYW5pc2ggbGVnYWwgZW50aXRpZXMNCiAqIEZ1cnRoZXIgcnVsZXMgY2FuIGJlIGZvdW5kIGluIFNwYW5pc2ggb24gaHR0cDovL2VzLndpa2lwZWRpYS5vcmcvd2lraS9DJUMzJUIzZGlnb19kZV9pZGVudGlmaWNhY2klQzMlQjNuX2Zpc2NhbA0KICoNCiAqIFNwYW5pc2ggQ0lGIHN0cnVjdHVyZToNCiAqDQogKiBbIFQgXVsgUCBdWyBQIF1bIE4gXVsgTiBdWyBOIF1bIE4gXVsgTiBdWyBDIF0NCiAqDQogKiBXaGVyZToNCiAqDQogKiBUOiAxIGNoYXJhY3Rlci4gS2luZCBvZiBPcmdhbml6YXRpb24gTGV0dGVyOiBbQUJDREVGR0hKS0xNTlBRUlNVVlddDQogKiBQOiAyIGNoYXJhY3RlcnMuIFByb3ZpbmNlLg0KICogTjogNSBjaGFyYWN0ZXJzLiBTZWN1ZW5jaWFsIE51bWJlciB3aXRoaW4gdGhlIHByb3ZpbmNlLg0KICogQzogMSBjaGFyYWN0ZXIuIENvbnRyb2wgRGlnaXQ6IFswLTlBLUpdLg0KICoNCiAqIFsgVCBdOiBLaW5kIG9mIE9yZ2FuaXphdGlvbnMuIFBvc3NpYmxlIHZhbHVlczoNCiAqDQogKiAgIEEuIENvcnBvcmF0aW9ucw0KICogICBCLiBMTENzDQogKiAgIEMuIEdlbmVyYWwgcGFydG5lcnNoaXBzDQogKiAgIEQuIENvbXBhbmllcyBsaW1pdGVkIHBhcnRuZXJzaGlwcw0KICogICBFLiBDb21tdW5pdGllcyBvZiBnb29kcw0KICogICBGLiBDb29wZXJhdGl2ZSBTb2NpZXRpZXMNCiAqICAgRy4gQXNzb2NpYXRpb25zDQogKiAgIEguIENvbW11bml0aWVzIG9mIGhvbWVvd25lcnMgaW4gaG9yaXpvbnRhbCBwcm9wZXJ0eSByZWdpbWUNCiAqICAgSi4gQ2l2aWwgU29jaWV0aWVzDQogKiAgIEsuIE9sZCBmb3JtYXQNCiAqICAgTC4gT2xkIGZvcm1hdA0KICogICBNLiBPbGQgZm9ybWF0DQogKiAgIE4uIE5vbnJlc2lkZW50IGVudGl0aWVzDQogKiAgIFAuIExvY2FsIGF1dGhvcml0aWVzDQogKiAgIFEuIEF1dG9ub21vdXMgYm9kaWVzLCBzdGF0ZSBvciBub3QsIGFuZCB0aGUgbGlrZSwgYW5kIGNvbmdyZWdhdGlvbnMgYW5kIHJlbGlnaW91cyBpbnN0aXR1dGlvbnMNCiAqICAgUi4gQ29uZ3JlZ2F0aW9ucyBhbmQgcmVsaWdpb3VzIGluc3RpdHV0aW9ucyAoc2luY2UgMjAwOCBPUkRFUiBFSEEvNDUxLzIwMDgpDQogKiAgIFMuIE9yZ2FucyBvZiBTdGF0ZSBBZG1pbmlzdHJhdGlvbiBhbmQgcmVnaW9ucw0KICogICBWLiBBZ3JhcmlhbiBUcmFuc2Zvcm1hdGlvbg0KICogICBXLiBQZXJtYW5lbnQgZXN0YWJsaXNobWVudHMgb2Ygbm9uLXJlc2lkZW50IGluIFNwYWluDQogKg0KICogWyBDIF06IENvbnRyb2wgRGlnaXQuIEl0IGNhbiBiZSBhIG51bWJlciBvciBhIGxldHRlciBkZXBlbmRpbmcgb24gVCB2YWx1ZToNCiAqIFsgVCBdICAtLT4gIFsgQyBdDQogKiAtLS0tLS0gICAgLS0tLS0tLS0tLQ0KICogICBBICAgICAgICAgTnVtYmVyDQogKiAgIEIgICAgICAgICBOdW1iZXINCiAqICAgRSAgICAgICAgIE51bWJlcg0KICogICBIICAgICAgICAgTnVtYmVyDQogKiAgIEsgICAgICAgICBMZXR0ZXINCiAqICAgUCAgICAgICAgIExldHRlcg0KICogICBRICAgICAgICAgTGV0dGVyDQogKiAgIFMgICAgICAgICBMZXR0ZXINCiAqDQogKi8NCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggImNpZkVTIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkgew0KCSJ1c2Ugc3RyaWN0IjsNCg0KCWlmICggdGhpcy5vcHRpb25hbCggZWxlbWVudCApICkgew0KCQlyZXR1cm4gdHJ1ZTsNCgl9DQoNCgl2YXIgY2lmUmVnRXggPSBuZXcgUmVnRXhwKCAvXihbQUJDREVGR0hKS0xNTlBRUlNVVlddKShcZHs3fSkoWzAtOUEtSl0pJC9naSApOw0KCXZhciBsZXR0ZXIgID0gdmFsdWUuc3Vic3RyaW5nKCAwLCAxICksIC8vIFsgVCBdDQoJCW51bWJlciAgPSB2YWx1ZS5zdWJzdHJpbmcoIDEsIDggKSwgLy8gWyBQIF1bIFAgXVsgTiBdWyBOIF1bIE4gXVsgTiBdWyBOIF0NCgkJY29udHJvbCA9IHZhbHVlLnN1YnN0cmluZyggOCwgOSApLCAvLyBbIEMgXQ0KCQlhbGxfc3VtID0gMCwNCgkJZXZlbl9zdW0gPSAwLA0KCQlvZGRfc3VtID0gMCwNCgkJaSwgbiwNCgkJY29udHJvbF9kaWdpdCwNCgkJY29udHJvbF9sZXR0ZXI7DQoNCglmdW5jdGlvbiBpc09kZCggbiApIHsNCgkJcmV0dXJuIG4gJSAyID09PSAwOw0KCX0NCg0KCS8vIFF1aWNrIGZvcm1hdCB0ZXN0DQoJaWYgKCB2YWx1ZS5sZW5ndGggIT09IDkgfHwgIWNpZlJlZ0V4LnRlc3QoIHZhbHVlICkgKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoNCglmb3IgKCBpID0gMDsgaSA8IG51bWJlci5sZW5ndGg7IGkrKyApIHsNCgkJbiA9IHBhcnNlSW50KCBudW1iZXJbIGkgXSwgMTAgKTsNCg0KCQkvLyBPZGQgcG9zaXRpb25zDQoJCWlmICggaXNPZGQoIGkgKSApIHsNCg0KCQkJLy8gT2RkIHBvc2l0aW9ucyBhcmUgbXVsdGlwbGllZCBmaXJzdC4NCgkJCW4gKj0gMjsNCg0KCQkJLy8gSWYgdGhlIG11bHRpcGxpY2F0aW9uIGlzIGJpZ2dlciB0aGFuIDEwIHdlIG5lZWQgdG8gYWRqdXN0DQoJCQlvZGRfc3VtICs9IG4gPCAxMCA/IG4gOiBuIC0gOTsNCg0KCQkvLyBFdmVuIHBvc2l0aW9ucw0KCQkvLyBKdXN0IHN1bSB0aGVtDQoJCX0gZWxzZSB7DQoJCQlldmVuX3N1bSArPSBuOw0KCQl9DQoJfQ0KDQoJYWxsX3N1bSA9IGV2ZW5fc3VtICsgb2RkX3N1bTsNCgljb250cm9sX2RpZ2l0ID0gKCAxMCAtICggYWxsX3N1bSApLnRvU3RyaW5nKCkuc3Vic3RyKCAtMSApICkudG9TdHJpbmcoKTsNCgljb250cm9sX2RpZ2l0ID0gcGFyc2VJbnQoIGNvbnRyb2xfZGlnaXQsIDEwICkgPiA5ID8gIjAiIDogY29udHJvbF9kaWdpdDsNCgljb250cm9sX2xldHRlciA9ICJKQUJDREVGR0hJIi5zdWJzdHIoIGNvbnRyb2xfZGlnaXQsIDEgKS50b1N0cmluZygpOw0KDQoJLy8gQ29udHJvbCBtdXN0IGJlIGEgZGlnaXQNCglpZiAoIGxldHRlci5tYXRjaCggL1tBQkVIXS8gKSApIHsNCgkJcmV0dXJuIGNvbnRyb2wgPT09IGNvbnRyb2xfZGlnaXQ7DQoNCgkvLyBDb250cm9sIG11c3QgYmUgYSBsZXR0ZXINCgl9IGVsc2UgaWYgKCBsZXR0ZXIubWF0Y2goIC9bS1BRU10vICkgKSB7DQoJCXJldHVybiBjb250cm9sID09PSBjb250cm9sX2xldHRlcjsNCgl9DQoNCgkvLyBDYW4gYmUgZWl0aGVyDQoJcmV0dXJuIGNvbnRyb2wgPT09IGNvbnRyb2xfZGlnaXQgfHwgY29udHJvbCA9PT0gY29udHJvbF9sZXR0ZXI7DQoNCn0sICJQbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIENJRiBudW1iZXIuIiApOw0KDQovKg0KICogQnJhemlsbGlhbiBDUEYgbnVtYmVyIChDYWRhc3RyYWRvIGRlIFBlc3NvYXMgRsOtc2ljYXMpIGlzIHRoZSBlcXVpdmFsZW50IG9mIGEgQnJhemlsaWFuIHRheCByZWdpc3RyYXRpb24gbnVtYmVyLg0KICogQ1BGIG51bWJlcnMgaGF2ZSAxMSBkaWdpdHMgaW4gdG90YWw6IDkgbnVtYmVycyBmb2xsb3dlZCBieSAyIGNoZWNrIG51bWJlcnMgdGhhdCBhcmUgYmVpbmcgdXNlZCBmb3IgdmFsaWRhdGlvbi4NCiAqLw0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAiY3BmQlIiLCBmdW5jdGlvbiggdmFsdWUgKSB7DQoNCgkvLyBSZW1vdmluZyBzcGVjaWFsIGNoYXJhY3RlcnMgZnJvbSB2YWx1ZQ0KCXZhbHVlID0gdmFsdWUucmVwbGFjZSggLyhbfiFAIyQlXiYqKClfKz1ge31cW1xdXC18XFw6Oyc8PiwuXC8/IF0pKy9nLCAiIiApOw0KDQoJLy8gQ2hlY2tpbmcgdmFsdWUgdG8gaGF2ZSAxMSBkaWdpdHMgb25seQ0KCWlmICggdmFsdWUubGVuZ3RoICE9PSAxMSApIHsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCg0KCXZhciBzdW0gPSAwLA0KCQlmaXJzdENOLCBzZWNvbmRDTiwgY2hlY2tSZXN1bHQsIGk7DQoNCglmaXJzdENOID0gcGFyc2VJbnQoIHZhbHVlLnN1YnN0cmluZyggOSwgMTAgKSwgMTAgKTsNCglzZWNvbmRDTiA9IHBhcnNlSW50KCB2YWx1ZS5zdWJzdHJpbmcoIDEwLCAxMSApLCAxMCApOw0KDQoJY2hlY2tSZXN1bHQgPSBmdW5jdGlvbiggc3VtLCBjbiApIHsNCgkJdmFyIHJlc3VsdCA9ICggc3VtICogMTAgKSAlIDExOw0KCQlpZiAoICggcmVzdWx0ID09PSAxMCApIHx8ICggcmVzdWx0ID09PSAxMSApICkgew0KCQkJcmVzdWx0ID0gMDsNCgkJfQ0KCQlyZXR1cm4gKCByZXN1bHQgPT09IGNuICk7DQoJfTsNCg0KCS8vIENoZWNraW5nIGZvciBkdW1wIGRhdGENCglpZiAoIHZhbHVlID09PSAiIiB8fA0KCQl2YWx1ZSA9PT0gIjAwMDAwMDAwMDAwIiB8fA0KCQl2YWx1ZSA9PT0gIjExMTExMTExMTExIiB8fA0KCQl2YWx1ZSA9PT0gIjIyMjIyMjIyMjIyIiB8fA0KCQl2YWx1ZSA9PT0gIjMzMzMzMzMzMzMzIiB8fA0KCQl2YWx1ZSA9PT0gIjQ0NDQ0NDQ0NDQ0IiB8fA0KCQl2YWx1ZSA9PT0gIjU1NTU1NTU1NTU1IiB8fA0KCQl2YWx1ZSA9PT0gIjY2NjY2NjY2NjY2IiB8fA0KCQl2YWx1ZSA9PT0gIjc3Nzc3Nzc3Nzc3IiB8fA0KCQl2YWx1ZSA9PT0gIjg4ODg4ODg4ODg4IiB8fA0KCQl2YWx1ZSA9PT0gIjk5OTk5OTk5OTk5Ig0KCSkgew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KDQoJLy8gU3RlcCAxIC0gdXNpbmcgZmlyc3QgQ2hlY2sgTnVtYmVyOg0KCWZvciAoIGkgPSAxOyBpIDw9IDk7IGkrKyApIHsNCgkJc3VtID0gc3VtICsgcGFyc2VJbnQoIHZhbHVlLnN1YnN0cmluZyggaSAtIDEsIGkgKSwgMTAgKSAqICggMTEgLSBpICk7DQoJfQ0KDQoJLy8gSWYgZmlyc3QgQ2hlY2sgTnVtYmVyIChDTikgaXMgdmFsaWQsIG1vdmUgdG8gU3RlcCAyIC0gdXNpbmcgc2Vjb25kIENoZWNrIE51bWJlcjoNCglpZiAoIGNoZWNrUmVzdWx0KCBzdW0sIGZpcnN0Q04gKSApIHsNCgkJc3VtID0gMDsNCgkJZm9yICggaSA9IDE7IGkgPD0gMTA7IGkrKyApIHsNCgkJCXN1bSA9IHN1bSArIHBhcnNlSW50KCB2YWx1ZS5zdWJzdHJpbmcoIGkgLSAxLCBpICksIDEwICkgKiAoIDEyIC0gaSApOw0KCQl9DQoJCXJldHVybiBjaGVja1Jlc3VsdCggc3VtLCBzZWNvbmRDTiApOw0KCX0NCglyZXR1cm4gZmFsc2U7DQoNCn0sICJQbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIENQRiBudW1iZXIiICk7DQoNCi8vIGh0dHBzOi8vanF1ZXJ5dmFsaWRhdGlvbi5vcmcvY3JlZGl0Y2FyZC1tZXRob2QvDQovLyBiYXNlZCBvbiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MdWhuX2FsZ29yaXRobQ0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAiY3JlZGl0Y2FyZCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHsNCglpZiAoIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSApIHsNCgkJcmV0dXJuICJkZXBlbmRlbmN5LW1pc21hdGNoIjsNCgl9DQoNCgkvLyBBY2NlcHQgb25seSBzcGFjZXMsIGRpZ2l0cyBhbmQgZGFzaGVzDQoJaWYgKCAvW14wLTkgXC1dKy8udGVzdCggdmFsdWUgKSApIHsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCg0KCXZhciBuQ2hlY2sgPSAwLA0KCQluRGlnaXQgPSAwLA0KCQliRXZlbiA9IGZhbHNlLA0KCQluLCBjRGlnaXQ7DQoNCgl2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoIC9cRC9nLCAiIiApOw0KDQoJLy8gQmFzaW5nIG1pbiBhbmQgbWF4IGxlbmd0aCBvbg0KCS8vIGh0dHBzOi8vZGV2ZWxvcGVyLmVhbi5jb20vZ2VuZXJhbF9pbmZvL1ZhbGlkX0NyZWRpdF9DYXJkX1R5cGVzDQoJaWYgKCB2YWx1ZS5sZW5ndGggPCAxMyB8fCB2YWx1ZS5sZW5ndGggPiAxOSApIHsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCg0KCWZvciAoIG4gPSB2YWx1ZS5sZW5ndGggLSAxOyBuID49IDA7IG4tLSApIHsNCgkJY0RpZ2l0ID0gdmFsdWUuY2hhckF0KCBuICk7DQoJCW5EaWdpdCA9IHBhcnNlSW50KCBjRGlnaXQsIDEwICk7DQoJCWlmICggYkV2ZW4gKSB7DQoJCQlpZiAoICggbkRpZ2l0ICo9IDIgKSA+IDkgKSB7DQoJCQkJbkRpZ2l0IC09IDk7DQoJCQl9DQoJCX0NCg0KCQluQ2hlY2sgKz0gbkRpZ2l0Ow0KCQliRXZlbiA9ICFiRXZlbjsNCgl9DQoNCglyZXR1cm4gKCBuQ2hlY2sgJSAxMCApID09PSAwOw0KfSwgIlBsZWFzZSBlbnRlciBhIHZhbGlkIGNyZWRpdCBjYXJkIG51bWJlci4iICk7DQoNCi8qIE5PVElDRTogTW9kaWZpZWQgdmVyc2lvbiBvZiBDYXN0bGUuQ29tcG9uZW50cy5WYWxpZGF0b3IuQ3JlZGl0Q2FyZFZhbGlkYXRvcg0KICogUmVkaXN0cmlidXRlZCB1bmRlciB0aGUgdGhlIEFwYWNoZSBMaWNlbnNlIDIuMCBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqIFZhbGlkIFR5cGVzOiBtYXN0ZXJjYXJkLCB2aXNhLCBhbWV4LCBkaW5lcnNjbHViLCBlbnJvdXRlLCBkaXNjb3ZlciwgamNiLCB1bmtub3duLCBhbGwgKG92ZXJyaWRlcyBhbGwgb3RoZXIgc2V0dGluZ3MpDQogKi8NCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggImNyZWRpdGNhcmR0eXBlcyIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCwgcGFyYW0gKSB7DQoJaWYgKCAvW14wLTlcLV0rLy50ZXN0KCB2YWx1ZSApICkgew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KDQoJdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCAvXEQvZywgIiIgKTsNCg0KCXZhciB2YWxpZFR5cGVzID0gMHgwMDAwOw0KDQoJaWYgKCBwYXJhbS5tYXN0ZXJjYXJkICkgew0KCQl2YWxpZFR5cGVzIHw9IDB4MDAwMTsNCgl9DQoJaWYgKCBwYXJhbS52aXNhICkgew0KCQl2YWxpZFR5cGVzIHw9IDB4MDAwMjsNCgl9DQoJaWYgKCBwYXJhbS5hbWV4ICkgew0KCQl2YWxpZFR5cGVzIHw9IDB4MDAwNDsNCgl9DQoJaWYgKCBwYXJhbS5kaW5lcnNjbHViICkgew0KCQl2YWxpZFR5cGVzIHw9IDB4MDAwODsNCgl9DQoJaWYgKCBwYXJhbS5lbnJvdXRlICkgew0KCQl2YWxpZFR5cGVzIHw9IDB4MDAxMDsNCgl9DQoJaWYgKCBwYXJhbS5kaXNjb3ZlciApIHsNCgkJdmFsaWRUeXBlcyB8PSAweDAwMjA7DQoJfQ0KCWlmICggcGFyYW0uamNiICkgew0KCQl2YWxpZFR5cGVzIHw9IDB4MDA0MDsNCgl9DQoJaWYgKCBwYXJhbS51bmtub3duICkgew0KCQl2YWxpZFR5cGVzIHw9IDB4MDA4MDsNCgl9DQoJaWYgKCBwYXJhbS5hbGwgKSB7DQoJCXZhbGlkVHlwZXMgPSAweDAwMDEgfCAweDAwMDIgfCAweDAwMDQgfCAweDAwMDggfCAweDAwMTAgfCAweDAwMjAgfCAweDAwNDAgfCAweDAwODA7DQoJfQ0KCWlmICggdmFsaWRUeXBlcyAmIDB4MDAwMSAmJiAvXig1WzEyMzQ1XSkvLnRlc3QoIHZhbHVlICkgKSB7IC8vIE1hc3RlcmNhcmQNCgkJcmV0dXJuIHZhbHVlLmxlbmd0aCA9PT0gMTY7DQoJfQ0KCWlmICggdmFsaWRUeXBlcyAmIDB4MDAwMiAmJiAvXig0KS8udGVzdCggdmFsdWUgKSApIHsgLy8gVmlzYQ0KCQlyZXR1cm4gdmFsdWUubGVuZ3RoID09PSAxNjsNCgl9DQoJaWYgKCB2YWxpZFR5cGVzICYgMHgwMDA0ICYmIC9eKDNbNDddKS8udGVzdCggdmFsdWUgKSApIHsgLy8gQW1leA0KCQlyZXR1cm4gdmFsdWUubGVuZ3RoID09PSAxNTsNCgl9DQoJaWYgKCB2YWxpZFR5cGVzICYgMHgwMDA4ICYmIC9eKDMoMFswMTIzNDVdfFs2OF0pKS8udGVzdCggdmFsdWUgKSApIHsgLy8gRGluZXJzY2x1Yg0KCQlyZXR1cm4gdmFsdWUubGVuZ3RoID09PSAxNDsNCgl9DQoJaWYgKCB2YWxpZFR5cGVzICYgMHgwMDEwICYmIC9eKDIoMDE0fDE0OSkpLy50ZXN0KCB2YWx1ZSApICkgeyAvLyBFbnJvdXRlDQoJCXJldHVybiB2YWx1ZS5sZW5ndGggPT09IDE1Ow0KCX0NCglpZiAoIHZhbGlkVHlwZXMgJiAweDAwMjAgJiYgL14oNjAxMSkvLnRlc3QoIHZhbHVlICkgKSB7IC8vIERpc2NvdmVyDQoJCXJldHVybiB2YWx1ZS5sZW5ndGggPT09IDE2Ow0KCX0NCglpZiAoIHZhbGlkVHlwZXMgJiAweDAwNDAgJiYgL14oMykvLnRlc3QoIHZhbHVlICkgKSB7IC8vIEpjYg0KCQlyZXR1cm4gdmFsdWUubGVuZ3RoID09PSAxNjsNCgl9DQoJaWYgKCB2YWxpZFR5cGVzICYgMHgwMDQwICYmIC9eKDIxMzF8MTgwMCkvLnRlc3QoIHZhbHVlICkgKSB7IC8vIEpjYg0KCQlyZXR1cm4gdmFsdWUubGVuZ3RoID09PSAxNTsNCgl9DQoJaWYgKCB2YWxpZFR5cGVzICYgMHgwMDgwICkgeyAvLyBVbmtub3duDQoJCXJldHVybiB0cnVlOw0KCX0NCglyZXR1cm4gZmFsc2U7DQp9LCAiUGxlYXNlIGVudGVyIGEgdmFsaWQgY3JlZGl0IGNhcmQgbnVtYmVyLiIgKTsNCg0KLyoqDQogKiBWYWxpZGF0ZXMgY3VycmVuY2llcyB3aXRoIGFueSBnaXZlbiBzeW1ib2xzIGJ5IEBqYW1lc2xvdWl6DQogKiBTeW1ib2xzIGNhbiBiZSBvcHRpb25hbCBvciByZXF1aXJlZC4gU3ltYm9scyByZXF1aXJlZCBieSBkZWZhdWx0DQogKg0KICogVXNhZ2UgZXhhbXBsZXM6DQogKiAgY3VycmVuY3k6IFsiwqMiLCBmYWxzZV0gLSBVc2UgZmFsc2UgZm9yIHNvZnQgY3VycmVuY3kgdmFsaWRhdGlvbg0KICogIGN1cnJlbmN5OiBbIiQiLCBmYWxzZV0NCiAqICBjdXJyZW5jeTogWyJSTSIsIGZhbHNlXSAtIGFsc28gd29ya3Mgd2l0aCB0ZXh0IGJhc2VkIHN5bWJvbHMgc3VjaCBhcyAiUk0iIC0gTWFsYXlzaWEgUmluZ2dpdCBldGMNCiAqDQogKiAgPGlucHV0IGNsYXNzPSJjdXJyZW5jeUlucHV0IiBuYW1lPSJjdXJyZW5jeUlucHV0Ij4NCiAqDQogKiBTb2Z0IHN5bWJvbCBjaGVja2luZw0KICogIGN1cnJlbmN5SW5wdXQ6IHsNCiAqICAgICBjdXJyZW5jeTogWyIkIiwgZmFsc2VdDQogKiAgfQ0KICoNCiAqIFN0cmljdCBzeW1ib2wgY2hlY2tpbmcgKGRlZmF1bHQpDQogKiAgY3VycmVuY3lJbnB1dDogew0KICogICAgIGN1cnJlbmN5OiAiJCINCiAqICAgICAvL09SDQogKiAgICAgY3VycmVuY3k6IFsiJCIsIHRydWVdDQogKiAgfQ0KICoNCiAqIE11bHRpcGxlIFN5bWJvbHMNCiAqICBjdXJyZW5jeUlucHV0OiB7DQogKiAgICAgY3VycmVuY3k6ICIkLMKjLMKiIg0KICogIH0NCiAqLw0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAiY3VycmVuY3kiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQsIHBhcmFtICkgew0KICAgIHZhciBpc1BhcmFtU3RyaW5nID0gdHlwZW9mIHBhcmFtID09PSAic3RyaW5nIiwNCiAgICAgICAgc3ltYm9sID0gaXNQYXJhbVN0cmluZyA/IHBhcmFtIDogcGFyYW1bIDAgXSwNCiAgICAgICAgc29mdCA9IGlzUGFyYW1TdHJpbmcgPyB0cnVlIDogcGFyYW1bIDEgXSwNCiAgICAgICAgcmVnZXg7DQoNCiAgICBzeW1ib2wgPSBzeW1ib2wucmVwbGFjZSggLywvZywgIiIgKTsNCiAgICBzeW1ib2wgPSBzb2Z0ID8gc3ltYm9sICsgIl0iIDogc3ltYm9sICsgIl0/IjsNCiAgICByZWdleCA9ICJeWyIgKyBzeW1ib2wgKyAiKFsxLTldezF9WzAtOV17MCwyfShcXCxbMC05XXszfSkqKFxcLlswLTldezAsMn0pP3xbMS05XXsxfVswLTldezAsfShcXC5bMC05XXswLDJ9KT98MChcXC5bMC05XXswLDJ9KT98KFxcLlswLTldezEsMn0pPykkIjsNCiAgICByZWdleCA9IG5ldyBSZWdFeHAoIHJlZ2V4ICk7DQogICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCByZWdleC50ZXN0KCB2YWx1ZSApOw0KDQp9LCAiUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBjdXJyZW5jeSIgKTsNCg0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAiZGF0ZUZBIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkgew0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgL15bMS00XVxkezN9XC8oKDA/WzEtNl1cLygoM1swLTFdKXwoWzEtMl1bMC05XSl8KDA/WzEtOV0pKSl8KCgxWzAtMl18KDA/WzctOV0pKVwvKDMwfChbMS0yXVswLTldKXwoMD9bMS05XSkpKSkkLy50ZXN0KCB2YWx1ZSApOw0KfSwgJC52YWxpZGF0b3IubWVzc2FnZXMuZGF0ZSApOw0KDQovKioNCiAqIFJldHVybiB0cnVlLCBpZiB0aGUgdmFsdWUgaXMgYSB2YWxpZCBkYXRlLCBhbHNvIG1ha2luZyB0aGlzIGZvcm1hbCBjaGVjayBkZC9tbS95eXl5Lg0KICoNCiAqIEBleGFtcGxlICQudmFsaWRhdG9yLm1ldGhvZHMuZGF0ZSgiMDEvMDEvMTkwMCIpDQogKiBAcmVzdWx0IHRydWUNCiAqDQogKiBAZXhhbXBsZSAkLnZhbGlkYXRvci5tZXRob2RzLmRhdGUoIjAxLzEzLzE5OTAiKQ0KICogQHJlc3VsdCBmYWxzZQ0KICoNCiAqIEBleGFtcGxlICQudmFsaWRhdG9yLm1ldGhvZHMuZGF0ZSgiMDEuMDEuMTkwMCIpDQogKiBAcmVzdWx0IGZhbHNlDQogKg0KICogQGV4YW1wbGUgPGlucHV0IG5hbWU9InBpcHBvIiBjbGFzcz0ie2RhdGVJVEE6dHJ1ZX0iIC8+DQogKiBAZGVzYyBEZWNsYXJlcyBhbiBvcHRpb25hbCBpbnB1dCBlbGVtZW50IHdob3NlIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBkYXRlLg0KICoNCiAqIEBuYW1lICQudmFsaWRhdG9yLm1ldGhvZHMuZGF0ZUlUQQ0KICogQHR5cGUgQm9vbGVhbg0KICogQGNhdCBQbHVnaW5zL1ZhbGlkYXRlL01ldGhvZHMNCiAqLw0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAiZGF0ZUlUQSIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHsNCgl2YXIgY2hlY2sgPSBmYWxzZSwNCgkJcmUgPSAvXlxkezEsMn1cL1xkezEsMn1cL1xkezR9JC8sDQoJCWFkYXRhLCBnZywgbW0sIGFhYWEsIHhkYXRhOw0KCWlmICggcmUudGVzdCggdmFsdWUgKSApIHsNCgkJYWRhdGEgPSB2YWx1ZS5zcGxpdCggIi8iICk7DQoJCWdnID0gcGFyc2VJbnQoIGFkYXRhWyAwIF0sIDEwICk7DQoJCW1tID0gcGFyc2VJbnQoIGFkYXRhWyAxIF0sIDEwICk7DQoJCWFhYWEgPSBwYXJzZUludCggYWRhdGFbIDIgXSwgMTAgKTsNCgkJeGRhdGEgPSBuZXcgRGF0ZSggRGF0ZS5VVEMoIGFhYWEsIG1tIC0gMSwgZ2csIDEyLCAwLCAwLCAwICkgKTsNCgkJaWYgKCAoIHhkYXRhLmdldFVUQ0Z1bGxZZWFyKCkgPT09IGFhYWEgKSAmJiAoIHhkYXRhLmdldFVUQ01vbnRoKCkgPT09IG1tIC0gMSApICYmICggeGRhdGEuZ2V0VVRDRGF0ZSgpID09PSBnZyApICkgew0KCQkJY2hlY2sgPSB0cnVlOw0KCQl9IGVsc2Ugew0KCQkJY2hlY2sgPSBmYWxzZTsNCgkJfQ0KCX0gZWxzZSB7DQoJCWNoZWNrID0gZmFsc2U7DQoJfQ0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgY2hlY2s7DQp9LCAkLnZhbGlkYXRvci5tZXNzYWdlcy5kYXRlICk7DQoNCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggImRhdGVOTCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHsNCglyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IC9eKDA/WzEtOV18WzEyXVxkfDNbMDFdKVtcLlwvXC1dKDA/WzEtOV18MVswMTJdKVtcLlwvXC1dKFsxMl1cZCk/KFxkXGQpJC8udGVzdCggdmFsdWUgKTsNCn0sICQudmFsaWRhdG9yLm1lc3NhZ2VzLmRhdGUgKTsNCg0KLy8gT2xkZXIgImFjY2VwdCIgZmlsZSBleHRlbnNpb24gbWV0aG9kLiBPbGQgZG9jczogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9QbHVnaW5zL1ZhbGlkYXRpb24vTWV0aG9kcy9hY2NlcHQNCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggImV4dGVuc2lvbiIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCwgcGFyYW0gKSB7DQoJcGFyYW0gPSB0eXBlb2YgcGFyYW0gPT09ICJzdHJpbmciID8gcGFyYW0ucmVwbGFjZSggLywvZywgInwiICkgOiAicG5nfGpwZT9nfGdpZiI7DQoJcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCB2YWx1ZS5tYXRjaCggbmV3IFJlZ0V4cCggIlxcLigiICsgcGFyYW0gKyAiKSQiLCAiaSIgKSApOw0KfSwgJC52YWxpZGF0b3IuZm9ybWF0KCAiUGxlYXNlIGVudGVyIGEgdmFsdWUgd2l0aCBhIHZhbGlkIGV4dGVuc2lvbi4iICkgKTsNCg0KLyoqDQogKiBEdXRjaCBnaXJvIGFjY291bnQgbnVtYmVycyAobm90IGJhbmsgbnVtYmVycykgaGF2ZSBtYXggNyBkaWdpdHMNCiAqLw0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAiZ2lyb2FjY291bnROTCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHsNCglyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IC9eWzAtOV17MSw3fSQvLnRlc3QoIHZhbHVlICk7DQp9LCAiUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBnaXJvIGFjY291bnQgbnVtYmVyIiApOw0KDQovKioNCiAqIElCQU4gaXMgdGhlIGludGVybmF0aW9uYWwgYmFuayBhY2NvdW50IG51bWJlci4NCiAqIEl0IGhhcyBhIGNvdW50cnkgLSBzcGVjaWZpYyBmb3JtYXQsIHRoYXQgaXMgY2hlY2tlZCBoZXJlIHRvbw0KICoNCiAqIFZhbGlkYXRpb24gaXMgY2FzZS1pbnNlbnNpdGl2ZS4gUGxlYXNlIG1ha2Ugc3VyZSB0byBub3JtYWxpemUgaW5wdXQgeW91cnNlbGYuDQogKi8NCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggImliYW4iLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7DQoNCgkvLyBTb21lIHF1aWNrIHNpbXBsZSB0ZXN0cyB0byBwcmV2ZW50IG5lZWRsZXNzIHdvcmsNCglpZiAoIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSApIHsNCgkJcmV0dXJuIHRydWU7DQoJfQ0KDQoJLy8gUmVtb3ZlIHNwYWNlcyBhbmQgdG8gdXBwZXIgY2FzZQ0KCXZhciBpYmFuID0gdmFsdWUucmVwbGFjZSggLyAvZywgIiIgKS50b1VwcGVyQ2FzZSgpLA0KCQlpYmFuY2hlY2tkaWdpdHMgPSAiIiwNCgkJbGVhZGluZ1plcm9lcyA9IHRydWUsDQoJCWNSZXN0ID0gIiIsDQoJCWNPcGVyYXRvciA9ICIiLA0KCQljb3VudHJ5Y29kZSwgaWJhbmNoZWNrLCBjaGFyQXQsIGNDaGFyLCBiYmFucGF0dGVybiwgYmJhbmNvdW50cnlwYXR0ZXJucywgaWJhbnJlZ2V4cCwgaSwgcDsNCg0KCS8vIENoZWNrIGZvciBJQkFOIGNvZGUgbGVuZ3RoLg0KCS8vIEl0IGNvbnRhaW5zOg0KCS8vIGNvdW50cnkgY29kZSBJU08gMzE2Ni0xIC0gdHdvIGxldHRlcnMsDQoJLy8gdHdvIGNoZWNrIGRpZ2l0cywNCgkvLyBCYXNpYyBCYW5rIEFjY291bnQgTnVtYmVyIChCQkFOKSAtIHVwIHRvIDMwIGNoYXJzDQoJdmFyIG1pbmltYWxJQkFObGVuZ3RoID0gNTsNCglpZiAoIGliYW4ubGVuZ3RoIDwgbWluaW1hbElCQU5sZW5ndGggKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoNCgkvLyBDaGVjayB0aGUgY291bnRyeSBjb2RlIGFuZCBmaW5kIHRoZSBjb3VudHJ5IHNwZWNpZmljIGZvcm1hdA0KCWNvdW50cnljb2RlID0gaWJhbi5zdWJzdHJpbmcoIDAsIDIgKTsNCgliYmFuY291bnRyeXBhdHRlcm5zID0gew0KCQkiQUwiOiAiXFxkezh9W1xcZEEtWl17MTZ9IiwNCgkJIkFEIjogIlxcZHs4fVtcXGRBLVpdezEyfSIsDQoJCSJBVCI6ICJcXGR7MTZ9IiwNCgkJIkFaIjogIltcXGRBLVpdezR9XFxkezIwfSIsDQoJCSJCRSI6ICJcXGR7MTJ9IiwNCgkJIkJIIjogIltBLVpdezR9W1xcZEEtWl17MTR9IiwNCgkJIkJBIjogIlxcZHsxNn0iLA0KCQkiQlIiOiAiXFxkezIzfVtBLVpdW1xcZEEtWl0iLA0KCQkiQkciOiAiW0EtWl17NH1cXGR7Nn1bXFxkQS1aXXs4fSIsDQoJCSJDUiI6ICJcXGR7MTd9IiwNCgkJIkhSIjogIlxcZHsxN30iLA0KCQkiQ1kiOiAiXFxkezh9W1xcZEEtWl17MTZ9IiwNCgkJIkNaIjogIlxcZHsyMH0iLA0KCQkiREsiOiAiXFxkezE0fSIsDQoJCSJETyI6ICJbQS1aXXs0fVxcZHsyMH0iLA0KCQkiRUUiOiAiXFxkezE2fSIsDQoJCSJGTyI6ICJcXGR7MTR9IiwNCgkJIkZJIjogIlxcZHsxNH0iLA0KCQkiRlIiOiAiXFxkezEwfVtcXGRBLVpdezExfVxcZHsyfSIsDQoJCSJHRSI6ICJbXFxkQS1aXXsyfVxcZHsxNn0iLA0KCQkiREUiOiAiXFxkezE4fSIsDQoJCSJHSSI6ICJbQS1aXXs0fVtcXGRBLVpdezE1fSIsDQoJCSJHUiI6ICJcXGR7N31bXFxkQS1aXXsxNn0iLA0KCQkiR0wiOiAiXFxkezE0fSIsDQoJCSJHVCI6ICJbXFxkQS1aXXs0fVtcXGRBLVpdezIwfSIsDQoJCSJIVSI6ICJcXGR7MjR9IiwNCgkJIklTIjogIlxcZHsyMn0iLA0KCQkiSUUiOiAiW1xcZEEtWl17NH1cXGR7MTR9IiwNCgkJIklMIjogIlxcZHsxOX0iLA0KCQkiSVQiOiAiW0EtWl1cXGR7MTB9W1xcZEEtWl17MTJ9IiwNCgkJIktaIjogIlxcZHszfVtcXGRBLVpdezEzfSIsDQoJCSJLVyI6ICJbQS1aXXs0fVtcXGRBLVpdezIyfSIsDQoJCSJMViI6ICJbQS1aXXs0fVtcXGRBLVpdezEzfSIsDQoJCSJMQiI6ICJcXGR7NH1bXFxkQS1aXXsyMH0iLA0KCQkiTEkiOiAiXFxkezV9W1xcZEEtWl17MTJ9IiwNCgkJIkxUIjogIlxcZHsxNn0iLA0KCQkiTFUiOiAiXFxkezN9W1xcZEEtWl17MTN9IiwNCgkJIk1LIjogIlxcZHszfVtcXGRBLVpdezEwfVxcZHsyfSIsDQoJCSJNVCI6ICJbQS1aXXs0fVxcZHs1fVtcXGRBLVpdezE4fSIsDQoJCSJNUiI6ICJcXGR7MjN9IiwNCgkJIk1VIjogIltBLVpdezR9XFxkezE5fVtBLVpdezN9IiwNCgkJIk1DIjogIlxcZHsxMH1bXFxkQS1aXXsxMX1cXGR7Mn0iLA0KCQkiTUQiOiAiW1xcZEEtWl17Mn1cXGR7MTh9IiwNCgkJIk1FIjogIlxcZHsxOH0iLA0KCQkiTkwiOiAiW0EtWl17NH1cXGR7MTB9IiwNCgkJIk5PIjogIlxcZHsxMX0iLA0KCQkiUEsiOiAiW1xcZEEtWl17NH1cXGR7MTZ9IiwNCgkJIlBTIjogIltcXGRBLVpdezR9XFxkezIxfSIsDQoJCSJQTCI6ICJcXGR7MjR9IiwNCgkJIlBUIjogIlxcZHsyMX0iLA0KCQkiUk8iOiAiW0EtWl17NH1bXFxkQS1aXXsxNn0iLA0KCQkiU00iOiAiW0EtWl1cXGR7MTB9W1xcZEEtWl17MTJ9IiwNCgkJIlNBIjogIlxcZHsyfVtcXGRBLVpdezE4fSIsDQoJCSJSUyI6ICJcXGR7MTh9IiwNCgkJIlNLIjogIlxcZHsyMH0iLA0KCQkiU0kiOiAiXFxkezE1fSIsDQoJCSJFUyI6ICJcXGR7MjB9IiwNCgkJIlNFIjogIlxcZHsyMH0iLA0KCQkiQ0giOiAiXFxkezV9W1xcZEEtWl17MTJ9IiwNCgkJIlROIjogIlxcZHsyMH0iLA0KCQkiVFIiOiAiXFxkezV9W1xcZEEtWl17MTd9IiwNCgkJIkFFIjogIlxcZHszfVxcZHsxNn0iLA0KCQkiR0IiOiAiW0EtWl17NH1cXGR7MTR9IiwNCgkJIlZHIjogIltcXGRBLVpdezR9XFxkezE2fSINCgl9Ow0KDQoJYmJhbnBhdHRlcm4gPSBiYmFuY291bnRyeXBhdHRlcm5zWyBjb3VudHJ5Y29kZSBdOw0KDQoJLy8gQXMgbmV3IGNvdW50cmllcyB3aWxsIHN0YXJ0IHVzaW5nIElCQU4gaW4gdGhlDQoJLy8gZnV0dXJlLCB3ZSBvbmx5IGNoZWNrIGlmIHRoZSBjb3VudHJ5Y29kZSBpcyBrbm93bi4NCgkvLyBUaGlzIHByZXZlbnRzIGZhbHNlIG5lZ2F0aXZlcywgd2hpbGUgYWxtb3N0IGFsbA0KCS8vIGZhbHNlIHBvc2l0aXZlcyBpbnRyb2R1Y2VkIGJ5IHRoaXMsIHdpbGwgYmUgY2F1Z2h0DQoJLy8gYnkgdGhlIGNoZWNrc3VtIHZhbGlkYXRpb24gYmVsb3cgYW55d2F5Lg0KCS8vIFN0cmljdCBjaGVja2luZyBzaG91bGQgcmV0dXJuIEZBTFNFIGZvciB1bmtub3duDQoJLy8gY291bnRyaWVzLg0KCWlmICggdHlwZW9mIGJiYW5wYXR0ZXJuICE9PSAidW5kZWZpbmVkIiApIHsNCgkJaWJhbnJlZ2V4cCA9IG5ldyBSZWdFeHAoICJeW0EtWl17Mn1cXGR7Mn0iICsgYmJhbnBhdHRlcm4gKyAiJCIsICIiICk7DQoJCWlmICggISggaWJhbnJlZ2V4cC50ZXN0KCBpYmFuICkgKSApIHsNCgkJCXJldHVybiBmYWxzZTsgLy8gSW52YWxpZCBjb3VudHJ5IHNwZWNpZmljIGZvcm1hdA0KCQl9DQoJfQ0KDQoJLy8gTm93IGNoZWNrIHRoZSBjaGVja3N1bSwgZmlyc3QgY29udmVydCB0byBkaWdpdHMNCglpYmFuY2hlY2sgPSBpYmFuLnN1YnN0cmluZyggNCwgaWJhbi5sZW5ndGggKSArIGliYW4uc3Vic3RyaW5nKCAwLCA0ICk7DQoJZm9yICggaSA9IDA7IGkgPCBpYmFuY2hlY2subGVuZ3RoOyBpKysgKSB7DQoJCWNoYXJBdCA9IGliYW5jaGVjay5jaGFyQXQoIGkgKTsNCgkJaWYgKCBjaGFyQXQgIT09ICIwIiApIHsNCgkJCWxlYWRpbmdaZXJvZXMgPSBmYWxzZTsNCgkJfQ0KCQlpZiAoICFsZWFkaW5nWmVyb2VzICkgew0KCQkJaWJhbmNoZWNrZGlnaXRzICs9ICIwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVoiLmluZGV4T2YoIGNoYXJBdCApOw0KCQl9DQoJfQ0KDQoJLy8gQ2FsY3VsYXRlIHRoZSByZXN1bHQgb2Y6IGliYW5jaGVja2RpZ2l0cyAlIDk3DQoJZm9yICggcCA9IDA7IHAgPCBpYmFuY2hlY2tkaWdpdHMubGVuZ3RoOyBwKysgKSB7DQoJCWNDaGFyID0gaWJhbmNoZWNrZGlnaXRzLmNoYXJBdCggcCApOw0KCQljT3BlcmF0b3IgPSAiIiArIGNSZXN0ICsgIiIgKyBjQ2hhcjsNCgkJY1Jlc3QgPSBjT3BlcmF0b3IgJSA5NzsNCgl9DQoJcmV0dXJuIGNSZXN0ID09PSAxOw0KfSwgIlBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgSUJBTiIgKTsNCg0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAiaW50ZWdlciIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHsNCglyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IC9eLT9cZCskLy50ZXN0KCB2YWx1ZSApOw0KfSwgIkEgcG9zaXRpdmUgb3IgbmVnYXRpdmUgbm9uLWRlY2ltYWwgbnVtYmVyIHBsZWFzZSIgKTsNCg0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAiaXB2NCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHsNCglyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IC9eKDI1WzAtNV18MlswLTRdXGR8WzAxXT9cZFxkPylcLigyNVswLTVdfDJbMC00XVxkfFswMV0/XGRcZD8pXC4oMjVbMC01XXwyWzAtNF1cZHxbMDFdP1xkXGQ/KVwuKDI1WzAtNV18MlswLTRdXGR8WzAxXT9cZFxkPykkL2kudGVzdCggdmFsdWUgKTsNCn0sICJQbGVhc2UgZW50ZXIgYSB2YWxpZCBJUCB2NCBhZGRyZXNzLiIgKTsNCg0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAiaXB2NiIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHsNCglyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IC9eKCgoWzAtOUEtRmEtZl17MSw0fTopezd9WzAtOUEtRmEtZl17MSw0fSl8KChbMC05QS1GYS1mXXsxLDR9Oil7Nn06WzAtOUEtRmEtZl17MSw0fSl8KChbMC05QS1GYS1mXXsxLDR9Oil7NX06KFswLTlBLUZhLWZdezEsNH06KT9bMC05QS1GYS1mXXsxLDR9KXwoKFswLTlBLUZhLWZdezEsNH06KXs0fTooWzAtOUEtRmEtZl17MSw0fTopezAsMn1bMC05QS1GYS1mXXsxLDR9KXwoKFswLTlBLUZhLWZdezEsNH06KXszfTooWzAtOUEtRmEtZl17MSw0fTopezAsM31bMC05QS1GYS1mXXsxLDR9KXwoKFswLTlBLUZhLWZdezEsNH06KXsyfTooWzAtOUEtRmEtZl17MSw0fTopezAsNH1bMC05QS1GYS1mXXsxLDR9KXwoKFswLTlBLUZhLWZdezEsNH06KXs2fSgoXGIoKDI1WzAtNV0pfCgxXGR7Mn0pfCgyWzAtNF1cZCl8KFxkezEsMn0pKVxiKVwuKXszfShcYigoMjVbMC01XSl8KDFcZHsyfSl8KDJbMC00XVxkKXwoXGR7MSwyfSkpXGIpKXwoKFswLTlBLUZhLWZdezEsNH06KXswLDV9OigoXGIoKDI1WzAtNV0pfCgxXGR7Mn0pfCgyWzAtNF1cZCl8KFxkezEsMn0pKVxiKVwuKXszfShcYigoMjVbMC01XSl8KDFcZHsyfSl8KDJbMC00XVxkKXwoXGR7MSwyfSkpXGIpKXwoOjooWzAtOUEtRmEtZl17MSw0fTopezAsNX0oKFxiKCgyNVswLTVdKXwoMVxkezJ9KXwoMlswLTRdXGQpfChcZHsxLDJ9KSlcYilcLil7M30oXGIoKDI1WzAtNV0pfCgxXGR7Mn0pfCgyWzAtNF1cZCl8KFxkezEsMn0pKVxiKSl8KFswLTlBLUZhLWZdezEsNH06OihbMC05QS1GYS1mXXsxLDR9Oil7MCw1fVswLTlBLUZhLWZdezEsNH0pfCg6OihbMC05QS1GYS1mXXsxLDR9Oil7MCw2fVswLTlBLUZhLWZdezEsNH0pfCgoWzAtOUEtRmEtZl17MSw0fTopezEsN306KSkkL2kudGVzdCggdmFsdWUgKTsNCn0sICJQbGVhc2UgZW50ZXIgYSB2YWxpZCBJUCB2NiBhZGRyZXNzLiIgKTsNCg0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAibGV0dGVyc29ubHkiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7DQoJcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCAvXlthLXpdKyQvaS50ZXN0KCB2YWx1ZSApOw0KfSwgIkxldHRlcnMgb25seSBwbGVhc2UiICk7DQoNCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggImxldHRlcnN3aXRoYmFzaWNwdW5jIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkgew0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgL15bYS16XC0uLCgpJyJcc10rJC9pLnRlc3QoIHZhbHVlICk7DQp9LCAiTGV0dGVycyBvciBwdW5jdHVhdGlvbiBvbmx5IHBsZWFzZSIgKTsNCg0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAibW9iaWxlTkwiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7DQoJcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCAvXigoXCt8MDAoXHN8XHM/XC1ccz8pPykzMShcc3xccz9cLVxzPyk/KFwoMFwpW1wtXHNdPyk/fDApNigoXHN8XHM/XC1ccz8pP1swLTldKXs4fSQvLnRlc3QoIHZhbHVlICk7DQp9LCAiUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBtb2JpbGUgbnVtYmVyIiApOw0KDQovKiBGb3IgVUsgcGhvbmUgZnVuY3Rpb25zLCBkbyB0aGUgZm9sbG93aW5nIHNlcnZlciBzaWRlIHByb2Nlc3Npbmc6DQogKiBDb21wYXJlIG9yaWdpbmFsIGlucHV0IHdpdGggdGhpcyBSZWdFeCBwYXR0ZXJuOg0KICogXlwoPyg/Oig/OjAwXCk/W1xzXC1dP1woP3xcKykoNDQpXCk/W1xzXC1dP1woPyg/OjBcKT9bXHNcLV0/XCg/KT98MCkoWzEtOV1cZHsxLDR9XCk/W1xzXGRcLV0rKSQNCiAqIEV4dHJhY3QgJDEgYW5kIHNldCAkcHJlZml4IHRvICcrNDQ8c3BhY2U+JyBpZiAkMSBpcyAnNDQnLCBvdGhlcndpc2Ugc2V0ICRwcmVmaXggdG8gJzAnDQogKiBFeHRyYWN0ICQyIGFuZCByZW1vdmUgaHlwaGVucywgc3BhY2VzIGFuZCBwYXJlbnRoZXNlcy4gUGhvbmUgbnVtYmVyIGlzIGNvbWJpbmVkICRwcmVmaXggYW5kICQyLg0KICogQSBudW1iZXIgb2YgdmVyeSBkZXRhaWxlZCBHQiB0ZWxlcGhvbmUgbnVtYmVyIFJlZ0V4IHBhdHRlcm5zIGNhbiBhbHNvIGJlIGZvdW5kIGF0Og0KICogaHR0cDovL3d3dy5hYS1hc3Rlcmlzay5vcmcudWsvaW5kZXgucGhwL1JlZ3VsYXJfRXhwcmVzc2lvbnNfZm9yX1ZhbGlkYXRpbmdfYW5kX0Zvcm1hdHRpbmdfR0JfVGVsZXBob25lX051bWJlcnMNCiAqLw0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAibW9iaWxlVUsiLCBmdW5jdGlvbiggcGhvbmVfbnVtYmVyLCBlbGVtZW50ICkgew0KCXBob25lX251bWJlciA9IHBob25lX251bWJlci5yZXBsYWNlKCAvXCh8XCl8XHMrfC0vZywgIiIgKTsNCglyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IHBob25lX251bWJlci5sZW5ndGggPiA5ICYmDQoJCXBob25lX251bWJlci5tYXRjaCggL14oPzooPzooPzowMFxzP3xcKyk0NFxzP3wwKTcoPzpbMTM0NTc4OV1cZHsyfXw2MjQpXHM/XGR7M31ccz9cZHszfSkkLyApOw0KfSwgIlBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgbW9iaWxlIG51bWJlciIgKTsNCg0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAibmV0bWFzayIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHsNCiAgICByZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IC9eKDI1NHwyNTJ8MjQ4fDI0MHwyMjR8MTkyfDEyOClcLjBcLjBcLjB8MjU1XC4oMjU0fDI1MnwyNDh8MjQwfDIyNHwxOTJ8MTI4fDApXC4wXC4wfDI1NVwuMjU1XC4oMjU0fDI1MnwyNDh8MjQwfDIyNHwxOTJ8MTI4fDApXC4wfDI1NVwuMjU1XC4yNTVcLigyNTR8MjUyfDI0OHwyNDB8MjI0fDE5MnwxMjh8MCkvaS50ZXN0KCB2YWx1ZSApOw0KfSwgIlBsZWFzZSBlbnRlciBhIHZhbGlkIG5ldG1hc2suIiApOw0KDQovKg0KICogVGhlIE5JRSAoTsO6bWVybyBkZSBJZGVudGlmaWNhY2nDs24gZGUgRXh0cmFuamVybykgaXMgYSBTcGFuaXNoIHRheCBpZGVudGlmaWNhdGlvbiBudW1iZXIgYXNzaWduZWQgYnkgdGhlIFNwYW5pc2gNCiAqIGF1dGhvcml0aWVzIHRvIGFueSBmb3JlaWduZXIuDQogKg0KICogVGhlIE5JRSBpcyB0aGUgZXF1aXZhbGVudCBvZiBhIFNwYW5pYXJkcyBOw7ptZXJvIGRlIElkZW50aWZpY2FjacOzbiBGaXNjYWwgKE5JRikgd2hpY2ggc2VydmVzIGFzIGEgZmlzY2FsDQogKiBpZGVudGlmaWNhdGlvbiBudW1iZXIuIFRoZSBDSUYgbnVtYmVyIChDZXJ0aWZpY2FkbyBkZSBJZGVudGlmaWNhY2nDs24gRmlzY2FsKSBpcyBlcXVpdmFsZW50IHRvIHRoZSBOSUYsIGJ1dCBhcHBsaWVzIHRvDQogKiBjb21wYW5pZXMgcmF0aGVyIHRoYW4gaW5kaXZpZHVhbHMuIFRoZSBOSUUgY29uc2lzdHMgb2YgYW4gJ1gnIG9yICdZJyBmb2xsb3dlZCBieSA3IG9yIDggZGlnaXRzIHRoZW4gYW5vdGhlciBsZXR0ZXIuDQogKi8NCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggIm5pZUVTIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkgew0KCSJ1c2Ugc3RyaWN0IjsNCg0KCWlmICggdGhpcy5vcHRpb25hbCggZWxlbWVudCApICkgew0KCQlyZXR1cm4gdHJ1ZTsNCgl9DQoNCgl2YXIgbmllUmVnRXggPSBuZXcgUmVnRXhwKCAvXltNWFlaXXsxfVswLTldezcsOH1bVFJXQUdNWUZQRFhCTkpaU1FWSExDS0VUXXsxfSQvZ2kgKTsNCgl2YXIgdmFsaWRDaGFycyA9ICJUUldBR01ZRlBEWEJOSlpTUVZITENLRVQiLA0KCQlsZXR0ZXIgPSB2YWx1ZS5zdWJzdHIoIHZhbHVlLmxlbmd0aCAtIDEgKS50b1VwcGVyQ2FzZSgpLA0KCQludW1iZXI7DQoNCgl2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKTsNCg0KCS8vIFF1aWNrIGZvcm1hdCB0ZXN0DQoJaWYgKCB2YWx1ZS5sZW5ndGggPiAxMCB8fCB2YWx1ZS5sZW5ndGggPCA5IHx8ICFuaWVSZWdFeC50ZXN0KCB2YWx1ZSApICkgew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KDQoJLy8gWCBtZWFucyBzYW1lIG51bWJlcg0KCS8vIFkgbWVhbnMgbnVtYmVyICsgMTAwMDAwMDANCgkvLyBaIG1lYW5zIG51bWJlciArIDIwMDAwMDAwDQoJdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCAvXltYXS8sICIwIiApDQoJCS5yZXBsYWNlKCAvXltZXS8sICIxIiApDQoJCS5yZXBsYWNlKCAvXltaXS8sICIyIiApOw0KDQoJbnVtYmVyID0gdmFsdWUubGVuZ3RoID09PSA5ID8gdmFsdWUuc3Vic3RyKCAwLCA4ICkgOiB2YWx1ZS5zdWJzdHIoIDAsIDkgKTsNCg0KCXJldHVybiB2YWxpZENoYXJzLmNoYXJBdCggcGFyc2VJbnQoIG51bWJlciwgMTAgKSAlIDIzICkgPT09IGxldHRlcjsNCg0KfSwgIlBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgTklFIG51bWJlci4iICk7DQoNCi8qDQogKiBUaGUgTsO6bWVybyBkZSBJZGVudGlmaWNhY2nDs24gRmlzY2FsICggTklGICkgaXMgdGhlIHdheSB0YXggaWRlbnRpZmljYXRpb24gdXNlZCBpbiBTcGFpbiBmb3IgaW5kaXZpZHVhbHMNCiAqLw0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAibmlmRVMiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7DQoJInVzZSBzdHJpY3QiOw0KDQoJaWYgKCB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgKSB7DQoJCXJldHVybiB0cnVlOw0KCX0NCg0KCXZhbHVlID0gdmFsdWUudG9VcHBlckNhc2UoKTsNCg0KCS8vIEJhc2ljIGZvcm1hdCB0ZXN0DQoJaWYgKCAhdmFsdWUubWF0Y2goICIoKF5bQS1aXXsxfVswLTldezd9W0EtWjAtOV17MX0kfF5bVF17MX1bQS1aMC05XXs4fSQpfF5bMC05XXs4fVtBLVpdezF9JCkiICkgKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoNCgkvLyBUZXN0IE5JRg0KCWlmICggL15bMC05XXs4fVtBLVpdezF9JC8udGVzdCggdmFsdWUgKSApIHsNCgkJcmV0dXJuICggIlRSV0FHTVlGUERYQk5KWlNRVkhMQ0tFIi5jaGFyQXQoIHZhbHVlLnN1YnN0cmluZyggOCwgMCApICUgMjMgKSA9PT0gdmFsdWUuY2hhckF0KCA4ICkgKTsNCgl9DQoNCgkvLyBUZXN0IHNwZWNpYWxzIE5JRiAoc3RhcnRzIHdpdGggSywgTCBvciBNKQ0KCWlmICggL15bS0xNXXsxfS8udGVzdCggdmFsdWUgKSApIHsNCgkJcmV0dXJuICggdmFsdWVbIDggXSA9PT0gIlRSV0FHTVlGUERYQk5KWlNRVkhMQ0tFIi5jaGFyQXQoIHZhbHVlLnN1YnN0cmluZyggOCwgMSApICUgMjMgKSApOw0KCX0NCg0KCXJldHVybiBmYWxzZTsNCg0KfSwgIlBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgTklGIG51bWJlci4iICk7DQoNCi8qDQogKiBOdW1lciBpZGVudHlmaWthY2ppIHBvZGF0a293ZWogKCBOSVAgKSBpcyB0aGUgd2F5IHRheCBpZGVudGlmaWNhdGlvbiB1c2VkIGluIFBvbGFuZCBmb3IgY29tcGFuaWVzDQogKi8NCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggIm5pcFBMIiwgZnVuY3Rpb24oIHZhbHVlICkgew0KCSJ1c2Ugc3RyaWN0IjsNCg0KCXZhbHVlID0gdmFsdWUucmVwbGFjZSggL1teMC05XS9nLCAiIiApOw0KDQoJaWYgKCB2YWx1ZS5sZW5ndGggIT09IDEwICkgew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KDQoJdmFyIGFyclN0ZXBzID0gWyA2LCA1LCA3LCAyLCAzLCA0LCA1LCA2LCA3IF07DQoJdmFyIGludFN1bSA9IDA7DQoJZm9yICggdmFyIGkgPSAwOyBpIDwgOTsgaSsrICkgew0KCQlpbnRTdW0gKz0gYXJyU3RlcHNbIGkgXSAqIHZhbHVlWyBpIF07DQoJfQ0KCXZhciBpbnQyID0gaW50U3VtICUgMTE7DQoJdmFyIGludENvbnRyb2xOciA9ICggaW50MiA9PT0gMTAgKSA/IDAgOiBpbnQyOw0KDQoJcmV0dXJuICggaW50Q29udHJvbE5yID09PSBwYXJzZUludCggdmFsdWVbIDkgXSwgMTAgKSApOw0KfSwgIlBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgTklQIG51bWJlci4iICk7DQoNCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggIm5vdEVxdWFsVG8iLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQsIHBhcmFtICkgew0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgISQudmFsaWRhdG9yLm1ldGhvZHMuZXF1YWxUby5jYWxsKCB0aGlzLCB2YWx1ZSwgZWxlbWVudCwgcGFyYW0gKTsNCn0sICJQbGVhc2UgZW50ZXIgYSBkaWZmZXJlbnQgdmFsdWUsIHZhbHVlcyBtdXN0IG5vdCBiZSB0aGUgc2FtZS4iICk7DQoNCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggIm5vd2hpdGVzcGFjZSIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHsNCglyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IC9eXFMrJC9pLnRlc3QoIHZhbHVlICk7DQp9LCAiTm8gd2hpdGUgc3BhY2UgcGxlYXNlIiApOw0KDQovKioNCiogUmV0dXJuIHRydWUgaWYgdGhlIGZpZWxkIHZhbHVlIG1hdGNoZXMgdGhlIGdpdmVuIGZvcm1hdCBSZWdFeHANCioNCiogQGV4YW1wbGUgJC52YWxpZGF0b3IubWV0aG9kcy5wYXR0ZXJuKCJBUjEwMDQiLGVsZW1lbnQsL15BUlxkezR9JC8pDQoqIEByZXN1bHQgdHJ1ZQ0KKg0KKiBAZXhhbXBsZSAkLnZhbGlkYXRvci5tZXRob2RzLnBhdHRlcm4oIkJSMTAwNCIsZWxlbWVudCwvXkFSXGR7NH0kLykNCiogQHJlc3VsdCBmYWxzZQ0KKg0KKiBAbmFtZSAkLnZhbGlkYXRvci5tZXRob2RzLnBhdHRlcm4NCiogQHR5cGUgQm9vbGVhbg0KKiBAY2F0IFBsdWdpbnMvVmFsaWRhdGUvTWV0aG9kcw0KKi8NCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggInBhdHRlcm4iLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQsIHBhcmFtICkgew0KCWlmICggdGhpcy5vcHRpb25hbCggZWxlbWVudCApICkgew0KCQlyZXR1cm4gdHJ1ZTsNCgl9DQoJaWYgKCB0eXBlb2YgcGFyYW0gPT09ICJzdHJpbmciICkgew0KCQlwYXJhbSA9IG5ldyBSZWdFeHAoICJeKD86IiArIHBhcmFtICsgIikkIiApOw0KCX0NCglyZXR1cm4gcGFyYW0udGVzdCggdmFsdWUgKTsNCn0sICJJbnZhbGlkIGZvcm1hdC4iICk7DQoNCi8qKg0KICogRHV0Y2ggcGhvbmUgbnVtYmVycyBoYXZlIDEwIGRpZ2l0cyAob3IgMTEgYW5kIHN0YXJ0IHdpdGggKzMxKS4NCiAqLw0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAicGhvbmVOTCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHsNCglyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IC9eKChcK3wwMChcc3xccz9cLVxzPyk/KTMxKFxzfFxzP1wtXHM/KT8oXCgwXClbXC1cc10/KT98MClbMS05XSgoXHN8XHM/XC1ccz8pP1swLTldKXs4fSQvLnRlc3QoIHZhbHVlICk7DQp9LCAiUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBwaG9uZSBudW1iZXIuIiApOw0KDQovKiBGb3IgVUsgcGhvbmUgZnVuY3Rpb25zLCBkbyB0aGUgZm9sbG93aW5nIHNlcnZlciBzaWRlIHByb2Nlc3Npbmc6DQogKiBDb21wYXJlIG9yaWdpbmFsIGlucHV0IHdpdGggdGhpcyBSZWdFeCBwYXR0ZXJuOg0KICogXlwoPyg/Oig/OjAwXCk/W1xzXC1dP1woP3xcKykoNDQpXCk/W1xzXC1dP1woPyg/OjBcKT9bXHNcLV0/XCg/KT98MCkoWzEtOV1cZHsxLDR9XCk/W1xzXGRcLV0rKSQNCiAqIEV4dHJhY3QgJDEgYW5kIHNldCAkcHJlZml4IHRvICcrNDQ8c3BhY2U+JyBpZiAkMSBpcyAnNDQnLCBvdGhlcndpc2Ugc2V0ICRwcmVmaXggdG8gJzAnDQogKiBFeHRyYWN0ICQyIGFuZCByZW1vdmUgaHlwaGVucywgc3BhY2VzIGFuZCBwYXJlbnRoZXNlcy4gUGhvbmUgbnVtYmVyIGlzIGNvbWJpbmVkICRwcmVmaXggYW5kICQyLg0KICogQSBudW1iZXIgb2YgdmVyeSBkZXRhaWxlZCBHQiB0ZWxlcGhvbmUgbnVtYmVyIFJlZ0V4IHBhdHRlcm5zIGNhbiBhbHNvIGJlIGZvdW5kIGF0Og0KICogaHR0cDovL3d3dy5hYS1hc3Rlcmlzay5vcmcudWsvaW5kZXgucGhwL1JlZ3VsYXJfRXhwcmVzc2lvbnNfZm9yX1ZhbGlkYXRpbmdfYW5kX0Zvcm1hdHRpbmdfR0JfVGVsZXBob25lX051bWJlcnMNCiAqLw0KDQovLyBNYXRjaGVzIFVLIGxhbmRsaW5lICsgbW9iaWxlLCBhY2NlcHRpbmcgb25seSAwMS0zIGZvciBsYW5kbGluZSBvciAwNyBmb3IgbW9iaWxlIHRvIGV4Y2x1ZGUgbWFueSBwcmVtaXVtIG51bWJlcnMNCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggInBob25lc1VLIiwgZnVuY3Rpb24oIHBob25lX251bWJlciwgZWxlbWVudCApIHsNCglwaG9uZV9udW1iZXIgPSBwaG9uZV9udW1iZXIucmVwbGFjZSggL1wofFwpfFxzK3wtL2csICIiICk7DQoJcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCBwaG9uZV9udW1iZXIubGVuZ3RoID4gOSAmJg0KCQlwaG9uZV9udW1iZXIubWF0Y2goIC9eKD86KD86KD86MDBccz98XCspNDRccz98MCkoPzoxXGR7OCw5fXxbMjNdXGR7OX18Nyg/OlsxMzQ1Nzg5XVxkezh9fDYyNFxkezZ9KSkpJC8gKTsNCn0sICJQbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIHVrIHBob25lIG51bWJlciIgKTsNCg0KLyogRm9yIFVLIHBob25lIGZ1bmN0aW9ucywgZG8gdGhlIGZvbGxvd2luZyBzZXJ2ZXIgc2lkZSBwcm9jZXNzaW5nOg0KICogQ29tcGFyZSBvcmlnaW5hbCBpbnB1dCB3aXRoIHRoaXMgUmVnRXggcGF0dGVybjoNCiAqIF5cKD8oPzooPzowMFwpP1tcc1wtXT9cKD98XCspKDQ0KVwpP1tcc1wtXT9cKD8oPzowXCk/W1xzXC1dP1woPyk/fDApKFsxLTldXGR7MSw0fVwpP1tcc1xkXC1dKykkDQogKiBFeHRyYWN0ICQxIGFuZCBzZXQgJHByZWZpeCB0byAnKzQ0PHNwYWNlPicgaWYgJDEgaXMgJzQ0Jywgb3RoZXJ3aXNlIHNldCAkcHJlZml4IHRvICcwJw0KICogRXh0cmFjdCAkMiBhbmQgcmVtb3ZlIGh5cGhlbnMsIHNwYWNlcyBhbmQgcGFyZW50aGVzZXMuIFBob25lIG51bWJlciBpcyBjb21iaW5lZCAkcHJlZml4IGFuZCAkMi4NCiAqIEEgbnVtYmVyIG9mIHZlcnkgZGV0YWlsZWQgR0IgdGVsZXBob25lIG51bWJlciBSZWdFeCBwYXR0ZXJucyBjYW4gYWxzbyBiZSBmb3VuZCBhdDoNCiAqIGh0dHA6Ly93d3cuYWEtYXN0ZXJpc2sub3JnLnVrL2luZGV4LnBocC9SZWd1bGFyX0V4cHJlc3Npb25zX2Zvcl9WYWxpZGF0aW5nX2FuZF9Gb3JtYXR0aW5nX0dCX1RlbGVwaG9uZV9OdW1iZXJzDQogKi8NCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggInBob25lVUsiLCBmdW5jdGlvbiggcGhvbmVfbnVtYmVyLCBlbGVtZW50ICkgew0KCXBob25lX251bWJlciA9IHBob25lX251bWJlci5yZXBsYWNlKCAvXCh8XCl8XHMrfC0vZywgIiIgKTsNCglyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IHBob25lX251bWJlci5sZW5ndGggPiA5ICYmDQoJCXBob25lX251bWJlci5tYXRjaCggL14oPzooPzooPzowMFxzP3xcKyk0NFxzPyl8KD86XCg/MCkpKD86XGR7Mn1cKT9ccz9cZHs0fVxzP1xkezR9fFxkezN9XCk/XHM/XGR7M31ccz9cZHszLDR9fFxkezR9XCk/XHM/KD86XGR7NX18XGR7M31ccz9cZHszfSl8XGR7NX1cKT9ccz9cZHs0LDV9KSQvICk7DQp9LCAiUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBwaG9uZSBudW1iZXIiICk7DQoNCi8qKg0KICogTWF0Y2hlcyBVUyBwaG9uZSBudW1iZXIgZm9ybWF0DQogKg0KICogd2hlcmUgdGhlIGFyZWEgY29kZSBtYXkgbm90IHN0YXJ0IHdpdGggMSBhbmQgdGhlIHByZWZpeCBtYXkgbm90IHN0YXJ0IHdpdGggMQ0KICogYWxsb3dzICctJyBvciAnICcgYXMgYSBzZXBhcmF0b3IgYW5kIGFsbG93cyBwYXJlbnMgYXJvdW5kIGFyZWEgY29kZQ0KICogc29tZSBwZW9wbGUgbWF5IHdhbnQgdG8gcHV0IGEgJzEnIGluIGZyb250IG9mIHRoZWlyIG51bWJlcg0KICoNCiAqIDEoMjEyKS05OTktMjM0NSBvcg0KICogMjEyIDk5OSAyMzQ0IG9yDQogKiAyMTItOTk5LTA5ODMNCiAqDQogKiBidXQgbm90DQogKiAxMTEtMTIzLTU0MzQNCiAqIGFuZCBub3QNCiAqIDIxMiAxMjMgNDU2Nw0KICovDQokLnZhbGlkYXRvci5hZGRNZXRob2QoICJwaG9uZVVTIiwgZnVuY3Rpb24oIHBob25lX251bWJlciwgZWxlbWVudCApIHsNCglwaG9uZV9udW1iZXIgPSBwaG9uZV9udW1iZXIucmVwbGFjZSggL1xzKy9nLCAiIiApOw0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgcGhvbmVfbnVtYmVyLmxlbmd0aCA+IDkgJiYNCgkJcGhvbmVfbnVtYmVyLm1hdGNoKCAvXihcKz8xLT8pPyhcKFsyLTldKFswMi05XVxkfDFbMDItOV0pXCl8WzItOV0oWzAyLTldXGR8MVswMi05XSkpLT9bMi05XShbMDItOV1cZHwxWzAyLTldKS0/XGR7NH0kLyApOw0KfSwgIlBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgcGhvbmUgbnVtYmVyIiApOw0KDQovKg0KKiBWYWxpZGEgQ0VQcyBkbyBicmFzaWxlaXJvczoNCioNCiogRm9ybWF0b3MgYWNlaXRvczoNCiogOTk5OTktOTk5DQoqIDk5Ljk5OS05OTkNCiogOTk5OTk5OTkNCiovDQokLnZhbGlkYXRvci5hZGRNZXRob2QoICJwb3N0YWxjb2RlQlIiLCBmdW5jdGlvbiggY2VwX3ZhbHVlLCBlbGVtZW50ICkgew0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgL15cZHsyfS5cZHszfS1cZHszfT8kfF5cZHs1fS0/XGR7M30/JC8udGVzdCggY2VwX3ZhbHVlICk7DQp9LCAiSW5mb3JtZSB1bSBDRVAgdsOhbGlkby4iICk7DQoNCi8qKg0KICogTWF0Y2hlcyBhIHZhbGlkIENhbmFkaWFuIFBvc3RhbCBDb2RlDQogKg0KICogQGV4YW1wbGUgalF1ZXJ5LnZhbGlkYXRvci5tZXRob2RzLnBvc3RhbENvZGVDQSggIkgwSCAwSDAiLCBlbGVtZW50ICkNCiAqIEByZXN1bHQgdHJ1ZQ0KICoNCiAqIEBleGFtcGxlIGpRdWVyeS52YWxpZGF0b3IubWV0aG9kcy5wb3N0YWxDb2RlQ0EoICJIMEgwSDAiLCBlbGVtZW50ICkNCiAqIEByZXN1bHQgZmFsc2UNCiAqDQogKiBAbmFtZSBqUXVlcnkudmFsaWRhdG9yLm1ldGhvZHMucG9zdGFsQ29kZUNBDQogKiBAdHlwZSBCb29sZWFuDQogKiBAY2F0IFBsdWdpbnMvVmFsaWRhdGUvTWV0aG9kcw0KICovDQokLnZhbGlkYXRvci5hZGRNZXRob2QoICJwb3N0YWxDb2RlQ0EiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7DQoJcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCAvXltBQkNFR0hKS0xNTlBSU1RWWFldXGRbQUJDRUdISktMTU5QUlNUVldYWVpdICpcZFtBQkNFR0hKS0xNTlBSU1RWV1hZWl1cZCQvaS50ZXN0KCB2YWx1ZSApOw0KfSwgIlBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgcG9zdGFsIGNvZGUiICk7DQoNCi8qIE1hdGNoZXMgSXRhbGlhbiBwb3N0Y29kZSAoQ0FQKSAqLw0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAicG9zdGFsY29kZUlUIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkgew0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgL15cZHs1fSQvLnRlc3QoIHZhbHVlICk7DQp9LCAiUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBwb3N0YWwgY29kZSIgKTsNCg0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAicG9zdGFsY29kZU5MIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkgew0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgL15bMS05XVswLTldezN9XHM/W2EtekEtWl17Mn0kLy50ZXN0KCB2YWx1ZSApOw0KfSwgIlBsZWFzZSBzcGVjaWZ5IGEgdmFsaWQgcG9zdGFsIGNvZGUiICk7DQoNCi8vIE1hdGNoZXMgVUsgcG9zdGNvZGUuIERvZXMgbm90IG1hdGNoIHRvIFVLIENoYW5uZWwgSXNsYW5kcyB0aGF0IGhhdmUgdGhlaXIgb3duIHBvc3Rjb2RlcyAobm9uIHN0YW5kYXJkIFVLKQ0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAicG9zdGNvZGVVSyIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCApIHsNCglyZXR1cm4gdGhpcy5vcHRpb25hbCggZWxlbWVudCApIHx8IC9eKCgoW0EtUFItVVdZWl1bMC05XSl8KFtBLVBSLVVXWVpdWzAtOV1bMC05XSl8KFtBLVBSLVVXWVpdW0EtSEstWV1bMC05XSl8KFtBLVBSLVVXWVpdW0EtSEstWV1bMC05XVswLTldKXwoW0EtUFItVVdZWl1bMC05XVtBLUhKS1NUVVddKXwoW0EtUFItVVdZWl1bQS1ISy1ZXVswLTldW0FCRUhNTlBSVldYWV0pKVxzPyhbMC05XVtBQkQtSEpMTlAtVVctWl17Mn0pfChHSVIpXHM/KDBBQSkpJC9pLnRlc3QoIHZhbHVlICk7DQp9LCAiUGxlYXNlIHNwZWNpZnkgYSB2YWxpZCBVSyBwb3N0Y29kZSIgKTsNCg0KLyoNCiAqIExldHMgeW91IHNheSAiYXQgbGVhc3QgWCBpbnB1dHMgdGhhdCBtYXRjaCBzZWxlY3RvciBZIG11c3QgYmUgZmlsbGVkLiINCiAqDQogKiBUaGUgZW5kIHJlc3VsdCBpcyB0aGF0IG5laXRoZXIgb2YgdGhlc2UgaW5wdXRzOg0KICoNCiAqCTxpbnB1dCBjbGFzcz0icHJvZHVjdGluZm8iIG5hbWU9InBhcnRudW1iZXIiPg0KICoJPGlucHV0IGNsYXNzPSJwcm9kdWN0aW5mbyIgbmFtZT0iZGVzY3JpcHRpb24iPg0KICoNCiAqCS4uLndpbGwgdmFsaWRhdGUgdW5sZXNzIGF0IGxlYXN0IG9uZSBvZiB0aGVtIGlzIGZpbGxlZC4NCiAqDQogKiBwYXJ0bnVtYmVyOgl7cmVxdWlyZV9mcm9tX2dyb3VwOiBbMSwiLnByb2R1Y3RpbmZvIl19LA0KICogZGVzY3JpcHRpb246IHtyZXF1aXJlX2Zyb21fZ3JvdXA6IFsxLCIucHJvZHVjdGluZm8iXX0NCiAqDQogKiBvcHRpb25zWzBdOiBudW1iZXIgb2YgZmllbGRzIHRoYXQgbXVzdCBiZSBmaWxsZWQgaW4gdGhlIGdyb3VwDQogKiBvcHRpb25zWzFdOiBDU1Mgc2VsZWN0b3IgdGhhdCBkZWZpbmVzIHRoZSBncm91cCBvZiBjb25kaXRpb25hbGx5IHJlcXVpcmVkIGZpZWxkcw0KICovDQokLnZhbGlkYXRvci5hZGRNZXRob2QoICJyZXF1aXJlX2Zyb21fZ3JvdXAiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQsIG9wdGlvbnMgKSB7DQoJdmFyICRmaWVsZHMgPSAkKCBvcHRpb25zWyAxIF0sIGVsZW1lbnQuZm9ybSApLA0KCQkkZmllbGRzRmlyc3QgPSAkZmllbGRzLmVxKCAwICksDQoJCXZhbGlkYXRvciA9ICRmaWVsZHNGaXJzdC5kYXRhKCAidmFsaWRfcmVxX2dycCIgKSA/ICRmaWVsZHNGaXJzdC5kYXRhKCAidmFsaWRfcmVxX2dycCIgKSA6ICQuZXh0ZW5kKCB7fSwgdGhpcyApLA0KCQlpc1ZhbGlkID0gJGZpZWxkcy5maWx0ZXIoIGZ1bmN0aW9uKCkgew0KCQkJcmV0dXJuIHZhbGlkYXRvci5lbGVtZW50VmFsdWUoIHRoaXMgKTsNCgkJfSApLmxlbmd0aCA+PSBvcHRpb25zWyAwIF07DQoNCgkvLyBTdG9yZSB0aGUgY2xvbmVkIHZhbGlkYXRvciBmb3IgZnV0dXJlIHZhbGlkYXRpb24NCgkkZmllbGRzRmlyc3QuZGF0YSggInZhbGlkX3JlcV9ncnAiLCB2YWxpZGF0b3IgKTsNCg0KCS8vIElmIGVsZW1lbnQgaXNuJ3QgYmVpbmcgdmFsaWRhdGVkLCBydW4gZWFjaCByZXF1aXJlX2Zyb21fZ3JvdXAgZmllbGQncyB2YWxpZGF0aW9uIHJ1bGVzDQoJaWYgKCAhJCggZWxlbWVudCApLmRhdGEoICJiZWluZ192YWxpZGF0ZWQiICkgKSB7DQoJCSRmaWVsZHMuZGF0YSggImJlaW5nX3ZhbGlkYXRlZCIsIHRydWUgKTsNCgkJJGZpZWxkcy5lYWNoKCBmdW5jdGlvbigpIHsNCgkJCXZhbGlkYXRvci5lbGVtZW50KCB0aGlzICk7DQoJCX0gKTsNCgkJJGZpZWxkcy5kYXRhKCAiYmVpbmdfdmFsaWRhdGVkIiwgZmFsc2UgKTsNCgl9DQoJcmV0dXJuIGlzVmFsaWQ7DQp9LCAkLnZhbGlkYXRvci5mb3JtYXQoICJQbGVhc2UgZmlsbCBhdCBsZWFzdCB7MH0gb2YgdGhlc2UgZmllbGRzLiIgKSApOw0KDQovKg0KICogTGV0cyB5b3Ugc2F5ICJlaXRoZXIgYXQgbGVhc3QgWCBpbnB1dHMgdGhhdCBtYXRjaCBzZWxlY3RvciBZIG11c3QgYmUgZmlsbGVkLA0KICogT1IgdGhleSBtdXN0IGFsbCBiZSBza2lwcGVkIChsZWZ0IGJsYW5rKS4iDQogKg0KICogVGhlIGVuZCByZXN1bHQsIGlzIHRoYXQgbm9uZSBvZiB0aGVzZSBpbnB1dHM6DQogKg0KICoJPGlucHV0IGNsYXNzPSJwcm9kdWN0aW5mbyIgbmFtZT0icGFydG51bWJlciI+DQogKgk8aW5wdXQgY2xhc3M9InByb2R1Y3RpbmZvIiBuYW1lPSJkZXNjcmlwdGlvbiI+DQogKgk8aW5wdXQgY2xhc3M9InByb2R1Y3RpbmZvIiBuYW1lPSJjb2xvciI+DQogKg0KICoJLi4ud2lsbCB2YWxpZGF0ZSB1bmxlc3MgZWl0aGVyIGF0IGxlYXN0IHR3byBvZiB0aGVtIGFyZSBmaWxsZWQsDQogKglPUiBub25lIG9mIHRoZW0gYXJlLg0KICoNCiAqIHBhcnRudW1iZXI6CXtza2lwX29yX2ZpbGxfbWluaW11bTogWzIsIi5wcm9kdWN0aW5mbyJdfSwNCiAqIGRlc2NyaXB0aW9uOiB7c2tpcF9vcl9maWxsX21pbmltdW06IFsyLCIucHJvZHVjdGluZm8iXX0sDQogKiBjb2xvcjoJCXtza2lwX29yX2ZpbGxfbWluaW11bTogWzIsIi5wcm9kdWN0aW5mbyJdfQ0KICoNCiAqIG9wdGlvbnNbMF06IG51bWJlciBvZiBmaWVsZHMgdGhhdCBtdXN0IGJlIGZpbGxlZCBpbiB0aGUgZ3JvdXANCiAqIG9wdGlvbnNbMV06IENTUyBzZWxlY3RvciB0aGF0IGRlZmluZXMgdGhlIGdyb3VwIG9mIGNvbmRpdGlvbmFsbHkgcmVxdWlyZWQgZmllbGRzDQogKg0KICovDQokLnZhbGlkYXRvci5hZGRNZXRob2QoICJza2lwX29yX2ZpbGxfbWluaW11bSIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCwgb3B0aW9ucyApIHsNCgl2YXIgJGZpZWxkcyA9ICQoIG9wdGlvbnNbIDEgXSwgZWxlbWVudC5mb3JtICksDQoJCSRmaWVsZHNGaXJzdCA9ICRmaWVsZHMuZXEoIDAgKSwNCgkJdmFsaWRhdG9yID0gJGZpZWxkc0ZpcnN0LmRhdGEoICJ2YWxpZF9za2lwIiApID8gJGZpZWxkc0ZpcnN0LmRhdGEoICJ2YWxpZF9za2lwIiApIDogJC5leHRlbmQoIHt9LCB0aGlzICksDQoJCW51bWJlckZpbGxlZCA9ICRmaWVsZHMuZmlsdGVyKCBmdW5jdGlvbigpIHsNCgkJCXJldHVybiB2YWxpZGF0b3IuZWxlbWVudFZhbHVlKCB0aGlzICk7DQoJCX0gKS5sZW5ndGgsDQoJCWlzVmFsaWQgPSBudW1iZXJGaWxsZWQgPT09IDAgfHwgbnVtYmVyRmlsbGVkID49IG9wdGlvbnNbIDAgXTsNCg0KCS8vIFN0b3JlIHRoZSBjbG9uZWQgdmFsaWRhdG9yIGZvciBmdXR1cmUgdmFsaWRhdGlvbg0KCSRmaWVsZHNGaXJzdC5kYXRhKCAidmFsaWRfc2tpcCIsIHZhbGlkYXRvciApOw0KDQoJLy8gSWYgZWxlbWVudCBpc24ndCBiZWluZyB2YWxpZGF0ZWQsIHJ1biBlYWNoIHNraXBfb3JfZmlsbF9taW5pbXVtIGZpZWxkJ3MgdmFsaWRhdGlvbiBydWxlcw0KCWlmICggISQoIGVsZW1lbnQgKS5kYXRhKCAiYmVpbmdfdmFsaWRhdGVkIiApICkgew0KCQkkZmllbGRzLmRhdGEoICJiZWluZ192YWxpZGF0ZWQiLCB0cnVlICk7DQoJCSRmaWVsZHMuZWFjaCggZnVuY3Rpb24oKSB7DQoJCQl2YWxpZGF0b3IuZWxlbWVudCggdGhpcyApOw0KCQl9ICk7DQoJCSRmaWVsZHMuZGF0YSggImJlaW5nX3ZhbGlkYXRlZCIsIGZhbHNlICk7DQoJfQ0KCXJldHVybiBpc1ZhbGlkOw0KfSwgJC52YWxpZGF0b3IuZm9ybWF0KCAiUGxlYXNlIGVpdGhlciBza2lwIHRoZXNlIGZpZWxkcyBvciBmaWxsIGF0IGxlYXN0IHswfSBvZiB0aGVtLiIgKSApOw0KDQovKiBWYWxpZGF0ZXMgVVMgU3RhdGVzIGFuZC9vciBUZXJyaXRvcmllcyBieSBAamRmb3JzeXRoZQ0KICogQ2FuIGJlIGNhc2UgaW5zZW5zaXRpdmUgb3IgcmVxdWlyZSBjYXBpdGFsaXphdGlvbiAtIGRlZmF1bHQgaXMgY2FzZSBpbnNlbnNpdGl2ZQ0KICogQ2FuIGluY2x1ZGUgVVMgVGVycml0b3JpZXMgb3Igbm90IC0gZGVmYXVsdCBkb2VzIG5vdA0KICogQ2FuIGluY2x1ZGUgVVMgTWlsaXRhcnkgcG9zdGFsIGFiYnJldmlhdGlvbnMgKEFBLCBBRSwgQVApIC0gZGVmYXVsdCBkb2VzIG5vdA0KICoNCiAqIE5vdGU6ICJTdGF0ZXMiIGFsd2F5cyBpbmNsdWRlcyBEQyAoRGlzdHJpY3Qgb2YgQ29sb21iaWEpDQogKg0KICogVXNhZ2UgZXhhbXBsZXM6DQogKg0KICogIFRoaXMgaXMgdGhlIGRlZmF1bHQgLSBjYXNlIGluc2Vuc2l0aXZlLCBubyB0ZXJyaXRvcmllcywgbm8gbWlsaXRhcnkgem9uZXMNCiAqICBzdGF0ZUlucHV0OiB7DQogKiAgICAgY2FzZVNlbnNpdGl2ZTogZmFsc2UsDQogKiAgICAgaW5jbHVkZVRlcnJpdG9yaWVzOiBmYWxzZSwNCiAqICAgICBpbmNsdWRlTWlsaXRhcnk6IGZhbHNlDQogKiAgfQ0KICoNCiAqICBPbmx5IGFsbG93IGNhcGl0YWwgbGV0dGVycywgbm8gdGVycml0b3JpZXMsIG5vIG1pbGl0YXJ5IHpvbmVzDQogKiAgc3RhdGVJbnB1dDogew0KICogICAgIGNhc2VTZW5zaXRpdmU6IGZhbHNlDQogKiAgfQ0KICoNCiAqICBDYXNlIGluc2Vuc2l0aXZlLCBpbmNsdWRlIHRlcnJpdG9yaWVzIGJ1dCBub3QgbWlsaXRhcnkgem9uZXMNCiAqICBzdGF0ZUlucHV0OiB7DQogKiAgICAgaW5jbHVkZVRlcnJpdG9yaWVzOiB0cnVlDQogKiAgfQ0KICoNCiAqICBPbmx5IGFsbG93IGNhcGl0YWwgbGV0dGVycywgaW5jbHVkZSB0ZXJyaXRvcmllcyBhbmQgbWlsaXRhcnkgem9uZXMNCiAqICBzdGF0ZUlucHV0OiB7DQogKiAgICAgY2FzZVNlbnNpdGl2ZTogdHJ1ZSwNCiAqICAgICBpbmNsdWRlVGVycml0b3JpZXM6IHRydWUsDQogKiAgICAgaW5jbHVkZU1pbGl0YXJ5OiB0cnVlDQogKiAgfQ0KICoNCiAqLw0KJC52YWxpZGF0b3IuYWRkTWV0aG9kKCAic3RhdGVVUyIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCwgb3B0aW9ucyApIHsNCgl2YXIgaXNEZWZhdWx0ID0gdHlwZW9mIG9wdGlvbnMgPT09ICJ1bmRlZmluZWQiLA0KCQljYXNlU2Vuc2l0aXZlID0gKCBpc0RlZmF1bHQgfHwgdHlwZW9mIG9wdGlvbnMuY2FzZVNlbnNpdGl2ZSA9PT0gInVuZGVmaW5lZCIgKSA/IGZhbHNlIDogb3B0aW9ucy5jYXNlU2Vuc2l0aXZlLA0KCQlpbmNsdWRlVGVycml0b3JpZXMgPSAoIGlzRGVmYXVsdCB8fCB0eXBlb2Ygb3B0aW9ucy5pbmNsdWRlVGVycml0b3JpZXMgPT09ICJ1bmRlZmluZWQiICkgPyBmYWxzZSA6IG9wdGlvbnMuaW5jbHVkZVRlcnJpdG9yaWVzLA0KCQlpbmNsdWRlTWlsaXRhcnkgPSAoIGlzRGVmYXVsdCB8fCB0eXBlb2Ygb3B0aW9ucy5pbmNsdWRlTWlsaXRhcnkgPT09ICJ1bmRlZmluZWQiICkgPyBmYWxzZSA6IG9wdGlvbnMuaW5jbHVkZU1pbGl0YXJ5LA0KCQlyZWdleDsNCg0KCWlmICggIWluY2x1ZGVUZXJyaXRvcmllcyAmJiAhaW5jbHVkZU1pbGl0YXJ5ICkgew0KCQlyZWdleCA9ICJeKEFbS0xSWl18Q1tBT1RdfERbQ0VdfEZMfEdBfEhJfElbQURMTl18S1tTWV18TEF8TVtBREVJTk9TVF18TltDREVISk1WWV18T1tIS1JdfFBBfFJJfFNbQ0RdfFRbTlhdfFVUfFZbQVRdfFdbQUlWWV0pJCI7DQoJfSBlbHNlIGlmICggaW5jbHVkZVRlcnJpdG9yaWVzICYmIGluY2x1ZGVNaWxpdGFyeSApIHsNCgkJcmVnZXggPSAiXihBW0FFS0xQUlNaXXxDW0FPVF18RFtDRV18Rkx8R1tBVV18SEl8SVtBRExOXXxLW1NZXXxMQXxNW0FERUlOT1BTVF18TltDREVISk1WWV18T1tIS1JdfFBbQVJdfFJJfFNbQ0RdfFRbTlhdfFVUfFZbQUlUXXxXW0FJVlldKSQiOw0KCX0gZWxzZSBpZiAoIGluY2x1ZGVUZXJyaXRvcmllcyApIHsNCgkJcmVnZXggPSAiXihBW0tMUlNaXXxDW0FPVF18RFtDRV18Rkx8R1tBVV18SEl8SVtBRExOXXxLW1NZXXxMQXxNW0FERUlOT1BTVF18TltDREVISk1WWV18T1tIS1JdfFBbQVJdfFJJfFNbQ0RdfFRbTlhdfFVUfFZbQUlUXXxXW0FJVlldKSQiOw0KCX0gZWxzZSB7DQoJCXJlZ2V4ID0gIl4oQVtBRUtMUFJaXXxDW0FPVF18RFtDRV18Rkx8R0F8SEl8SVtBRExOXXxLW1NZXXxMQXxNW0FERUlOT1NUXXxOW0NERUhKTVZZXXxPW0hLUl18UEF8Ukl8U1tDRF18VFtOWF18VVR8VltBVF18V1tBSVZZXSkkIjsNCgl9DQoNCglyZWdleCA9IGNhc2VTZW5zaXRpdmUgPyBuZXcgUmVnRXhwKCByZWdleCApIDogbmV3IFJlZ0V4cCggcmVnZXgsICJpIiApOw0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgcmVnZXgudGVzdCggdmFsdWUgKTsNCn0sICJQbGVhc2Ugc3BlY2lmeSBhIHZhbGlkIHN0YXRlIiApOw0KDQovLyBUT0RPIGNoZWNrIGlmIHZhbHVlIHN0YXJ0cyB3aXRoIDwsIG90aGVyd2lzZSBkb24ndCB0cnkgc3RyaXBwaW5nIGFueXRoaW5nDQokLnZhbGlkYXRvci5hZGRNZXRob2QoICJzdHJpcHBlZG1pbmxlbmd0aCIsIGZ1bmN0aW9uKCB2YWx1ZSwgZWxlbWVudCwgcGFyYW0gKSB7DQoJcmV0dXJuICQoIHZhbHVlICkudGV4dCgpLmxlbmd0aCA+PSBwYXJhbTsNCn0sICQudmFsaWRhdG9yLmZvcm1hdCggIlBsZWFzZSBlbnRlciBhdCBsZWFzdCB7MH0gY2hhcmFjdGVycyIgKSApOw0KDQokLnZhbGlkYXRvci5hZGRNZXRob2QoICJ0aW1lIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkgew0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgL14oWzAxXVxkfDJbMC0zXXxbMC05XSkoOlswLTVdXGQpezEsMn0kLy50ZXN0KCB2YWx1ZSApOw0KfSwgIlBsZWFzZSBlbnRlciBhIHZhbGlkIHRpbWUsIGJldHdlZW4gMDA6MDAgYW5kIDIzOjU5IiApOw0KDQokLnZhbGlkYXRvci5hZGRNZXRob2QoICJ0aW1lMTJoIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkgew0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgL14oKDA/WzEtOV18MVswMTJdKSg6WzAtNV1cZCl7MSwyfShcID9bQVBdTSkpJC9pLnRlc3QoIHZhbHVlICk7DQp9LCAiUGxlYXNlIGVudGVyIGEgdmFsaWQgdGltZSBpbiAxMi1ob3VyIGFtL3BtIGZvcm1hdCIgKTsNCg0KLy8gU2FtZSBhcyB1cmwsIGJ1dCBUTEQgaXMgb3B0aW9uYWwNCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggInVybDIiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7DQoJcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCAvXihodHRwcz98ZnRwKTpcL1wvKCgoKFthLXpdfFxkfC18XC58X3x+fFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKXwoJVtcZGEtZl17Mn0pfFshXCQmJ1woXClcKlwrLDs9XXw6KSpAKT8oKChcZHxbMS05XVxkfDFcZFxkfDJbMC00XVxkfDI1WzAtNV0pXC4oXGR8WzEtOV1cZHwxXGRcZHwyWzAtNF1cZHwyNVswLTVdKVwuKFxkfFsxLTldXGR8MVxkXGR8MlswLTRdXGR8MjVbMC01XSlcLihcZHxbMS05XVxkfDFcZFxkfDJbMC00XVxkfDI1WzAtNV0pKXwoKChbYS16XXxcZHxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSl8KChbYS16XXxcZHxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkoW2Etel18XGR8LXxcLnxffH58W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pKihbYS16XXxcZHxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkpKVwuKSooKFthLXpdfFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKXwoKFthLXpdfFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKShbYS16XXxcZHwtfFwufF98fnxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkqKFthLXpdfFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKSkpXC4/KSg6XGQqKT8pKFwvKCgoW2Etel18XGR8LXxcLnxffH58W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pfCglW1xkYS1mXXsyfSl8WyFcJCYnXChcKVwqXCssOz1dfDp8QCkrKFwvKChbYS16XXxcZHwtfFwufF98fnxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSl8KCVbXGRhLWZdezJ9KXxbIVwkJidcKFwpXCpcKyw7PV18OnxAKSopKik/KT8oXD8oKChbYS16XXxcZHwtfFwufF98fnxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSl8KCVbXGRhLWZdezJ9KXxbIVwkJidcKFwpXCpcKyw7PV18OnxAKXxbXHVFMDAwLVx1RjhGRl18XC98XD8pKik/KCMoKChbYS16XXxcZHwtfFwufF98fnxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSl8KCVbXGRhLWZdezJ9KXxbIVwkJidcKFwpXCpcKyw7PV18OnxAKXxcL3xcPykqKT8kL2kudGVzdCggdmFsdWUgKTsNCn0sICQudmFsaWRhdG9yLm1lc3NhZ2VzLnVybCApOw0KDQovKioNCiAqIFJldHVybiB0cnVlLCBpZiB0aGUgdmFsdWUgaXMgYSB2YWxpZCB2ZWhpY2xlIGlkZW50aWZpY2F0aW9uIG51bWJlciAoVklOKS4NCiAqDQogKiBXb3JrcyB3aXRoIGFsbCBraW5kIG9mIHRleHQgaW5wdXRzLg0KICoNCiAqIEBleGFtcGxlIDxpbnB1dCB0eXBlPSJ0ZXh0IiBzaXplPSIyMCIgbmFtZT0iVmVoaWNsZUlEIiBjbGFzcz0ie3JlcXVpcmVkOnRydWUsdmluVVM6dHJ1ZX0iIC8+DQogKiBAZGVzYyBEZWNsYXJlcyBhIHJlcXVpcmVkIGlucHV0IGVsZW1lbnQgd2hvc2UgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIHZlaGljbGUgaWRlbnRpZmljYXRpb24gbnVtYmVyLg0KICoNCiAqIEBuYW1lICQudmFsaWRhdG9yLm1ldGhvZHMudmluVVMNCiAqIEB0eXBlIEJvb2xlYW4NCiAqIEBjYXQgUGx1Z2lucy9WYWxpZGF0ZS9NZXRob2RzDQogKi8NCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggInZpblVTIiwgZnVuY3Rpb24oIHYgKSB7DQoJaWYgKCB2Lmxlbmd0aCAhPT0gMTcgKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoNCgl2YXIgTEwgPSBbICJBIiwgIkIiLCAiQyIsICJEIiwgIkUiLCAiRiIsICJHIiwgIkgiLCAiSiIsICJLIiwgIkwiLCAiTSIsICJOIiwgIlAiLCAiUiIsICJTIiwgIlQiLCAiVSIsICJWIiwgIlciLCAiWCIsICJZIiwgIloiIF0sDQoJCVZMID0gWyAxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCAxLCAyLCAzLCA0LCA1LCA3LCA5LCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5IF0sDQoJCUZMID0gWyA4LCA3LCA2LCA1LCA0LCAzLCAyLCAxMCwgMCwgOSwgOCwgNywgNiwgNSwgNCwgMywgMiBdLA0KCQlycyA9IDAsDQoJCWksIG4sIGQsIGYsIGNkLCBjZHY7DQoNCglmb3IgKCBpID0gMDsgaSA8IDE3OyBpKysgKSB7DQoJCWYgPSBGTFsgaSBdOw0KCQlkID0gdi5zbGljZSggaSwgaSArIDEgKTsNCgkJaWYgKCBpID09PSA4ICkgew0KCQkJY2R2ID0gZDsNCgkJfQ0KCQlpZiAoICFpc05hTiggZCApICkgew0KCQkJZCAqPSBmOw0KCQl9IGVsc2Ugew0KCQkJZm9yICggbiA9IDA7IG4gPCBMTC5sZW5ndGg7IG4rKyApIHsNCgkJCQlpZiAoIGQudG9VcHBlckNhc2UoKSA9PT0gTExbIG4gXSApIHsNCgkJCQkJZCA9IFZMWyBuIF07DQoJCQkJCWQgKj0gZjsNCgkJCQkJaWYgKCBpc05hTiggY2R2ICkgJiYgbiA9PT0gOCApIHsNCgkJCQkJCWNkdiA9IExMWyBuIF07DQoJCQkJCX0NCgkJCQkJYnJlYWs7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJCXJzICs9IGQ7DQoJfQ0KCWNkID0gcnMgJSAxMTsNCglpZiAoIGNkID09PSAxMCApIHsNCgkJY2QgPSAiWCI7DQoJfQ0KCWlmICggY2QgPT09IGNkdiApIHsNCgkJcmV0dXJuIHRydWU7DQoJfQ0KCXJldHVybiBmYWxzZTsNCn0sICJUaGUgc3BlY2lmaWVkIHZlaGljbGUgaWRlbnRpZmljYXRpb24gbnVtYmVyIChWSU4pIGlzIGludmFsaWQuIiApOw0KDQokLnZhbGlkYXRvci5hZGRNZXRob2QoICJ6aXBjb2RlVVMiLCBmdW5jdGlvbiggdmFsdWUsIGVsZW1lbnQgKSB7DQoJcmV0dXJuIHRoaXMub3B0aW9uYWwoIGVsZW1lbnQgKSB8fCAvXlxkezV9KC1cZHs0fSk/JC8udGVzdCggdmFsdWUgKTsNCn0sICJUaGUgc3BlY2lmaWVkIFVTIFpJUCBDb2RlIGlzIGludmFsaWQiICk7DQoNCiQudmFsaWRhdG9yLmFkZE1ldGhvZCggInppcHJhbmdlIiwgZnVuY3Rpb24oIHZhbHVlLCBlbGVtZW50ICkgew0KCXJldHVybiB0aGlzLm9wdGlvbmFsKCBlbGVtZW50ICkgfHwgL145MFsyLTVdXGRcezJcfS1cZHs0fSQvLnRlc3QoIHZhbHVlICk7DQp9LCAiWW91ciBaSVAtY29kZSBtdXN0IGJlIGluIHRoZSByYW5nZSA5MDJ4eC14eHh4IHRvIDkwNXh4LXh4eHgiICk7DQpyZXR1cm4gJDsNCn0pKTs=";
            var bytes = Convert.FromBase64String(s);
            return File(bytes, "text/javascript");
        }
    }
}