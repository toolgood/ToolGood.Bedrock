using Microsoft.AspNetCore.Mvc;
using System;
using System.IO;
using System.IO.Compression;
using System.Linq;

namespace ToolGood.WwwRoot.Test
{
    public partial class WwwRootController : Controller
    {
        [HttpGet("favicon.ico")]
        public IActionResult favicon_ico()
        {
            if (SetResponseHeaders("4859E39AE6C0F1F428F2126A6BB32BD9") == false) { return StatusCode(304); }
            const string s = "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";
            var bytes = UseCompressBytes(s);
            return File(bytes, " image/vnd.microsoft.icon");
        }
        private bool SetResponseHeaders(string etag)
        {
            if (Request.Headers["If-None-Match"] == etag) { return false; }
            Response.Headers["Cache-Control"] = "max-age=315360000";
            Response.Headers["Etag"] = etag;
            Response.Headers["Date"] = DateTime.Now.ToString("r");
            Response.Headers["Expires"] = DateTime.Now.AddYears(100).ToString("r");
            return true;
        }
        private byte[] UseCompressBytes(string s)
        {
            var bytes = Convert.FromBase64String(s);
            var sp = Request.Headers["Accept-Encoding"].ToString().Replace(" ", "").ToLower().Split(',');
            if (sp.Contains("br")) {
                Response.Headers["Content-Encoding"] = "br";
            } else  {
                using (MemoryStream stream = new MemoryStream(bytes)) {
                    using (BrotliStream zStream = new BrotliStream(stream, CompressionMode.Decompress)) {
                        using (var resultStream = new MemoryStream()) {
                            zStream.CopyTo(resultStream);
                            bytes = resultStream.ToArray();
                        }
                    }
                }
                if (sp.Contains("gzip")) {
                    Response.Headers["Content-Encoding"] = "gzip";
                    using (MemoryStream stream = new MemoryStream()) {
                        using (GZipStream zStream = new GZipStream(stream, CompressionMode.Compress)) {
                            zStream.Write(bytes, 0, bytes.Length);
                            zStream.Close();
                        }
                        bytes = stream.ToArray();
                    }
                }
            }
            return bytes;
        }
    }
}